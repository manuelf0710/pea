(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{I83f:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today:e=>"D\xeda"===e?"Hoy":("Semana"===e?"Esta":"Este")+" "+e.toLocaleLowerCase()},viewHint:e=>"Vista "+("Semana"===e?"de la":"del")+" "+e.toLocaleLowerCase(),weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el d\xeda",moreLinkText:"m\xe1s",moreLinkHint:e=>`Mostrar ${e} eventos m\xe1s`,noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"}},Z0b2:function(e,t,o){"use strict";o.r(t),o.d(t,"PeaModule",(function(){return yt}));var i=o("ofXK"),a=o("tk/3"),r=o("tyNb"),n=o("PC/O"),s=o("fXoL");let c=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Fb({type:e,selectors:[["app-index"]],decls:50,vars:0,consts:[[1,"content"],[1,"row"],[1,"col-lg-3","col-xs-6"],[1,"small-box","bg-aqua"],[1,"inner"],[1,"icon"],[1,"ion","ion-social-usd"],["href","ventas",1,"small-box-footer"],[1,"fa","fa-arrow-circle-right"],[1,"small-box","bg-green"],[1,"ion","ion-clipboard"],["href","categorias",1,"small-box-footer"],[1,"small-box","bg-yellow"],[1,"ion","ion-person-add"],["href","clientes",1,"small-box-footer"],[1,"small-box","bg-red"],[1,"ion","ion-ios-cart"],["href","productos",1,"small-box-footer"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Rb(3,"div",3),s.Rb(4,"div",4),s.Rb(5,"h3"),s.Gc(6,"8"),s.Qb(),s.Rb(7,"p"),s.Gc(8,"Total Solicitud"),s.Qb(),s.Qb(),s.Rb(9,"div",5),s.Mb(10,"i",6),s.Qb(),s.Rb(11,"a",7),s.Gc(12," M\xe1s info "),s.Mb(13,"i",8),s.Qb(),s.Qb(),s.Qb(),s.Rb(14,"div",2),s.Rb(15,"div",9),s.Rb(16,"div",4),s.Rb(17,"h3"),s.Gc(18,"6"),s.Qb(),s.Rb(19,"p"),s.Gc(20,"Programadas"),s.Qb(),s.Qb(),s.Rb(21,"div",5),s.Mb(22,"i",10),s.Qb(),s.Rb(23,"a",11),s.Gc(24," M\xe1s info "),s.Mb(25,"i",8),s.Qb(),s.Qb(),s.Qb(),s.Rb(26,"div",2),s.Rb(27,"div",12),s.Rb(28,"div",4),s.Rb(29,"h3"),s.Gc(30,"4"),s.Qb(),s.Rb(31,"p"),s.Gc(32,"Clientes"),s.Qb(),s.Qb(),s.Rb(33,"div",5),s.Mb(34,"i",13),s.Qb(),s.Rb(35,"a",14),s.Gc(36," M\xe1s info "),s.Mb(37,"i",8),s.Qb(),s.Qb(),s.Qb(),s.Rb(38,"div",2),s.Rb(39,"div",15),s.Rb(40,"div",4),s.Rb(41,"h3"),s.Gc(42,"4"),s.Qb(),s.Rb(43,"p"),s.Gc(44,"Productos"),s.Qb(),s.Qb(),s.Rb(45,"div",5),s.Mb(46,"i",16),s.Qb(),s.Rb(47,"a",17),s.Gc(48," M\xe1s info "),s.Mb(49,"i",8),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb())},styles:[""]}),e})();var l=o("AytR"),d=o("LRne"),b=o("pLZG"),u=o("Kj3r"),p=o("/uUt"),m=o("vkgz"),f=o("eIep"),h=o("JIr8"),g=o("lJxs"),v=o("3Pt+"),R=o("1kSV");function Q(e,t){1&e&&(s.Rb(0,"small",6),s.Mb(1,"i",7),s.Qb())}let _=(()=>{class e{constructor(e){this._HttpClient=e,this.lengthSize=3,this.labelValue="nombre",this.searching=!1,this.searchFailed=!1,this.search=e=>e.pipe(Object(b.a)(e=>e.length>this.lengthSize||0==e.length),Object(u.a)(200),Object(p.a)(),Object(m.a)(()=>this.searching=!0),Object(f.a)(e=>this.buscarData(e).pipe(Object(m.a)(()=>this.searchFailed=!1),Object(h.a)(()=>(this.searchFailed=!0,Object(d.a)([]))))),Object(m.a)(()=>this.searching=!1)),this.seleccionado=new s.n}ngOnInit(){}buscarData(e){return""===e?Object(d.a)([]):this._HttpClient.post(this.url,{globalsearch:e}).pipe(Object(g.a)(e=>(console.log(e.data),e.data?e.data:e)))}selected(e){console.log("algo seleccionado",e.item),this.seleccionado.emit(e.item)}resultFormatBandListValue(e){return e.nombre}inputFormatBandListValue(e){return e.nombre?e.nombre:e}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(a.b))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-autocomplete"]],inputs:{url:"url",lengthSize:"lengthSize",labelValue:"labelValue"},outputs:{seleccionado:"seleccionado"},decls:6,vars:6,consts:[[1,"input-group","input-group-sm","mb-3"],["type","text","aria-label","Small","placeholder","digite para buscar",1,"form-control","form-control-sm",3,"ngModel","ngbTypeahead","resultFormatter","inputFormatter","editable","ngModelChange","selectItem"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text"],[1,"fa","fa-search"],["class","form-text text-muted",4,"ngIf"],[1,"form-text","text-muted"],[1,"fa","fa-refresh","fa-spin"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"input",1),s.cc("ngModelChange",(function(e){return t.modeloBusqueda=e}))("selectItem",(function(e){return t.selected(e)})),s.Qb(),s.Rb(2,"div",2),s.Rb(3,"span",3),s.Mb(4,"i",4),s.Qb(),s.Ec(5,Q,2,0,"small",5),s.Qb(),s.Qb()),2&e&&(s.zb(1),s.lc("ngModel",t.modeloBusqueda)("ngbTypeahead",t.search)("resultFormatter",t.resultFormatBandListValue)("inputFormatter",t.inputFormatBandListValue)("editable",!1),s.zb(4),s.lc("ngIf",t.searching))},directives:[v.a,R.t,v.l,v.o,i.o],styles:[""]}),e})(),y=(()=>{class e{constructor(){this.url=l.a.apiUrl+"/comun/buscarproducto"}ngOnInit(){}seleccionado(e){console.log("selcionado ",e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Fb({type:e,selectors:[["app-crear-ods"]],decls:1,vars:2,consts:[[3,"url","labelValue","seleccionado"]],template:function(e,t){1&e&&(s.Rb(0,"app-autocomplete",0),s.cc("seleccionado",(function(e){return t.seleccionado(e)})),s.Qb()),2&e&&s.lc("url",t.url)("labelValue","descripcion")},directives:[_],styles:[""]}),e})();var G=o("cp0P"),M=o("3WbM"),S=o("kEHr");let x=(()=>{class e{constructor(e){this._http=e}getLista(){return this._http.get(l.a.apiUrl+l.a.tipoproductos.getAll).pipe(Object(g.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),I=(()=>{class e{constructor(e){this._http=e}getRegionales(){return this._http.get(l.a.apiUrl+l.a.comun.getRegionales).pipe(Object(g.a)(e=>e.data))}getUsersAll(e){return this._http.get(l.a.apiUrl+l.a.comun.getlistarAllUsers+"?profile="+e).pipe(Object(g.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),z=(()=>{class e{constructor(e){this._http=e}guardarsolicitud(e){return null==e.id?this._http.post(l.a.apiUrl+l.a.solicitud.post,e):this._http.put(l.a.apiUrl+"/pos/categorias/"+e.id,e)}getSolicitudById(e){return this._http.get(l.a.apiUrl+l.a.solicitud.getById+e).pipe(Object(g.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var C=o("fqV1");function k(e,t){1&e&&s.Mb(0,"app-loading")}function E(e,t){if(1&e&&(s.Rb(0,"option",36),s.Gc(1),s.Qb()),2&e){const e=t.$implicit;s.lc("value",e.id),s.zb(1),s.Ic(" ",e.name," ")}}function A(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo tipo producto no debe estar vac\xedo."),s.Qb())}function w(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,A,2,0,"small",37),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("tipoproducto_id").hasError("required"))}}function P(e,t){if(1&e&&(s.Rb(0,"option",36),s.Gc(1),s.Qb()),2&e){const e=t.$implicit;s.lc("value",e.id),s.zb(1),s.Ic(" ",e.nombre," ")}}function F(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo regional no debe estar vac\xedo."),s.Qb())}function O(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,F,2,0,"small",37),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("regional_id").hasError("required"))}}function L(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo contrato no debe estar vac\xedo."),s.Qb())}function D(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,L,2,0,"small",37),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("contrato_id").hasError("required"))}}function q(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo a\xf1o no debe estar vac\xedo."),s.Qb())}function T(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo a\xf1o min\xedmo debe ser 2022."),s.Qb())}function V(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,q,2,0,"small",37),s.Ec(2,T,2,0,"small",37),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("anio").hasError("required")),s.zb(1),s.lc("ngIf",e.formulario.get("anio").hasError("min"))}}function N(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo cantidad no debe estar vac\xedo."),s.Qb())}function U(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo cantidad min\xedmo debe ser 1."),s.Qb())}function B(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,N,2,0,"small",37),s.Ec(2,U,2,0,"small",37),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("cantidad").hasError("required")),s.zb(1),s.lc("ngIf",e.formulario.get("cantidad").hasError("min"))}}function j(e,t){1&e&&(s.Rb(0,"small",38),s.Gc(1,"el campo profesional no debe estar vac\xedo."),s.Qb())}function H(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,j,2,0,"small",37),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("profesional_id").hasError("required"))}}function $(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",2),s.Rb(1,"form",3),s.cc("ngSubmit",(function(t){return s.vc(e),s.ec().guardar(t)})),s.Rb(2,"div",4),s.Rb(3,"h5",5),s.Gc(4,"Solicitud"),s.Qb(),s.Rb(5,"div",6),s.Rb(6,"div",7),s.Rb(7,"div",8),s.Rb(8,"div",9),s.Rb(9,"label",10),s.Gc(10,"Tipo producto"),s.Qb(),s.Rb(11,"div",11),s.Rb(12,"div",12),s.Rb(13,"span",13),s.Mb(14,"i",14),s.Qb(),s.Qb(),s.Rb(15,"select",15),s.Rb(16,"option",16),s.Gc(17," Seleccione tipo de producto "),s.Qb(),s.Ec(18,E,2,2,"option",17),s.Qb(),s.Qb(),s.Ec(19,w,2,1,"div",0),s.Qb(),s.Qb(),s.Rb(20,"div",8),s.Rb(21,"div",9),s.Rb(22,"label",18),s.Gc(23,"Regional"),s.Qb(),s.Rb(24,"div",11),s.Rb(25,"div",12),s.Rb(26,"span",13),s.Mb(27,"i",19),s.Qb(),s.Qb(),s.Rb(28,"select",20),s.Rb(29,"option",16),s.Gc(30," Seleccione la regional "),s.Qb(),s.Ec(31,P,2,2,"option",17),s.Qb(),s.Qb(),s.Ec(32,O,2,1,"div",0),s.Qb(),s.Qb(),s.Qb(),s.Rb(33,"div",7),s.Rb(34,"div",8),s.Rb(35,"div",9),s.Rb(36,"label",21),s.Gc(37,"Contrato"),s.Qb(),s.Rb(38,"app-autocomplete",22),s.cc("seleccionado",(function(t){return s.vc(e),s.ec().seleccionado(t)})),s.Qb(),s.Qb(),s.Ec(39,D,2,1,"div",0),s.Qb(),s.Rb(40,"div",8),s.Rb(41,"div",9),s.Rb(42,"label",23),s.Gc(43,"A\xf1o"),s.Qb(),s.Rb(44,"div",11),s.Rb(45,"div",12),s.Rb(46,"span",13),s.Mb(47,"i",24),s.Qb(),s.Qb(),s.Mb(48,"input",25),s.Qb(),s.Ec(49,V,3,2,"div",0),s.Qb(),s.Qb(),s.Qb(),s.Rb(50,"div",7),s.Rb(51,"div",8),s.Rb(52,"div",9),s.Rb(53,"label",26),s.Gc(54,"Cantidad"),s.Qb(),s.Rb(55,"div",11),s.Rb(56,"div",12),s.Rb(57,"span",13),s.Mb(58,"i",27),s.Qb(),s.Qb(),s.Mb(59,"input",28),s.Qb(),s.Ec(60,B,3,2,"div",0),s.Qb(),s.Qb(),s.Rb(61,"div",8),s.Rb(62,"div",9),s.Rb(63,"label",29),s.Gc(64,"Descripci\xf3n"),s.Qb(),s.Rb(65,"div",11),s.Rb(66,"div",12),s.Rb(67,"span",13),s.Mb(68,"i",30),s.Qb(),s.Qb(),s.Mb(69,"input",31),s.Qb(),s.Qb(),s.Qb(),s.Rb(70,"div",8),s.Rb(71,"div",9),s.Rb(72,"label",32),s.Gc(73,"Programador"),s.Qb(),s.Rb(74,"app-autocomplete",22),s.cc("seleccionado",(function(t){return s.vc(e),s.ec().seleccionadoProfesional(t)})),s.Qb(),s.Qb(),s.Ec(75,H,2,1,"div",0),s.Qb(),s.Qb(),s.Rb(76,"div",7),s.Rb(77,"div",33),s.Rb(78,"button",34),s.Mb(79,"i",35),s.Gc(80,"Guardar "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.ec();s.zb(1),s.lc("formGroup",e.formulario),s.zb(15),s.lc("ngValue",null),s.zb(2),s.lc("ngForOf",e.tipoProductos),s.zb(1),s.lc("ngIf",e.formulario.get("tipoproducto_id").errors&&e.formulario.get("tipoproducto_id").touched),s.zb(10),s.lc("ngValue",null),s.zb(2),s.lc("ngForOf",e.regionales),s.zb(1),s.lc("ngIf",e.formulario.get("regional_id").errors&&e.formulario.get("regional_id").touched),s.zb(6),s.lc("url",e.url)("labelValue","contrato"),s.zb(1),s.lc("ngIf",e.formulario.get("contrato_id").errors&&e.formulario.get("contrato_id").touched),s.zb(10),s.lc("ngIf",e.formulario.get("anio").errors&&e.formulario.get("anio").touched),s.zb(11),s.lc("ngIf",e.formulario.get("cantidad").errors&&e.formulario.get("cantidad").touched),s.zb(14),s.lc("url",e.urlProfesionales)("labelValue","profesional"),s.zb(1),s.lc("ngIf",e.formulario.get("profesional_id").errors&&e.formulario.get("profesional_id").touched)}}let Z=(()=>{class e{constructor(e,t,o,i,a,r,n,s){this.FormBuilder=e,this.route=t,this.router=o,this._ToastService=i,this._UtilService=a,this._TipoproductosService=r,this._ComunService=n,this._ProductosrepsoService=s,this.url=l.a.apiUrl+l.a.comun.buscarContrato,this.urlProfesionales=l.a.apiUrl+l.a.comun.buscarUsers+"?profile=2",this.loading=!1,this.respuesta={status:"close",data:[]}}ngOnInit(){this.buildForm(),this.loading=!0,Object(G.a)([this._TipoproductosService.getLista(),this._ComunService.getRegionales()]).subscribe(([e,t])=>{this.regionales=t,this.tipoProductos=e,this.loading=!1})}buildForm(){this.formulario=this.FormBuilder.group({id:[null],tipoproducto_id:[null,[v.t.required]],regional_id:[null,[v.t.required]],contrato_id:[null,[v.t.required]],profesional_id:["",[v.t.required]],anio:[null,[v.t.required,v.t.pattern("^[0-9]*$"),v.t.minLength(4),v.t.maxLength(4),v.t.min(2022)]],descripcion:[null],cantidad:[null,[v.t.required,v.t.pattern("^[0-9]*$"),v.t.minLength(1),v.t.min(1)]]})}seleccionado(e){this.formulario.get("contrato_id").setValue(e.id)}seleccionadoProfesional(e){this.formulario.get("profesional_id").setValue(e.id)}guardar(e){if(e.preventDefault(),this.formulario.valid){const e=Object.assign({},this.formulario.value);this._UtilService.confirm({title:"Guardar Solicitud",message:"Seguro que desea guardar esta solicitud?"}).then(()=>{this.loading=!0,this._ProductosrepsoService.guardarsolicitud(e).subscribe(e=>{if("ok"==e.status&&(this.respuesta={status:"ok",data:e},this._ToastService.success("Solicitud "+e.msg+" correctamente"),this.router.navigate(["/pea/solicitudes"])),"error"==e.status){let t=this._ToastService.errorMessage(e.msg);this._ToastService.danger(t)}})},()=>{this.loading=!1})}else this.formulario.markAllAsTouched()}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(v.c),s.Lb(r.a),s.Lb(r.c),s.Lb(M.a),s.Lb(S.a),s.Lb(x),s.Lb(I),s.Lb(z))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-solicitud"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],["novalidate","",3,"formGroup","ngSubmit"],[1,"card","w-100"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-lg-6","col-xs-12"],[1,"form-group"],["for","tipoproducto"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-th"],["name","tipoproducto_id","id","tipoproducto_id","formControlName","tipoproducto_id",1,"form-control","form-control-sm"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","regional"],[1,"fa","fa-map"],["name","regional_id","id","regional_id","formControlName","regional_id",1,"form-control","form-control-sm"],["for","contrato"],[3,"url","labelValue","seleccionado"],["for","anio"],[1,"fa","fa-calendar-o"],["type","number","placeholder","A\xf1o","formControlName","anio",1,"form-control","form-control-sm"],["for","cantidad"],[1,"fa","fa-sort-numeric-desc"],["type","number","placeholder","Cantidad","formControlName","cantidad",1,"form-control","form-control-sm"],["for","descripcion"],[1,"fa","fa-file-text"],["type","text","placeholder","Descripci\xf3n","formControlName","descripcion",1,"form-control","form-control-sm"],["for","profesional"],[1,"col-md-6","offset-md-3","text-center"],["type","submit",1,"btn","btn-secondary","btn-lg"],[1,"fa","fa-save","mr-1"],[3,"value"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"]],template:function(e,t){1&e&&(s.Ec(0,k,1,0,"app-loading",0),s.Ec(1,$,81,15,"div",1)),2&e&&(s.lc("ngIf",t.loading),s.zb(1),s.lc("ngIf",!t.loading))},directives:[i.o,C.a,v.v,v.m,v.f,v.s,v.l,v.e,v.p,v.u,i.n,_,v.q,v.a],styles:[""]}),e})(),J=(()=>{class e{constructor(e){this._http=e}getTipoProductoByUser(e){return this._http.get(l.a.apiUrl+l.a.tipoproductos_user.getById+e).pipe(Object(g.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function W(e,t){1&e&&s.Mb(0,"app-loading")}function Y(e,t){if(1&e){const e=s.Sb();s.Rb(0,"li",8),s.cc("click",(function(){s.vc(e);const o=t.$implicit;return s.ec().getProfesionalsAssoc(o)})),s.Rb(1,"span",9),s.Gc(2),s.Qb(),s.Gc(3),s.Qb()}if(2&e){const e=t.$implicit;s.zb(2),s.Hc(e.tiempo),s.zb(1),s.Ic(" ",e.name," ")}}function K(e,t){if(1&e){const e=s.Sb();s.Rb(0,"li",8),s.cc("click",(function(){s.vc(e);const o=t.$implicit;return s.ec().agendaProfesional(o)})),s.Gc(1),s.Qb()}if(2&e){const e=t.$implicit;s.zb(1),s.Ic(" ",e.name," ")}}function X(e,t){if(1&e&&(s.Rb(0,"div",2),s.Rb(1,"div",10),s.Rb(2,"h3"),s.Gc(3),s.Qb(),s.Rb(4,"div",2),s.Rb(5,"div",11),s.Gc(6),s.Qb(),s.Rb(7,"div",11),s.Gc(8," Enviar Email "),s.Mb(9,"input",12),s.Qb(),s.Rb(10,"div",11),s.Gc(11," Tipo Cita "),s.Rb(12,"select",13),s.Rb(13,"option",14),s.Gc(14,"Seleccione..."),s.Qb(),s.Rb(15,"option",15),s.Gc(16,"Presencial"),s.Qb(),s.Rb(17,"option",16),s.Gc(18,"Virtual"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(19,"div",2),s.Rb(20,"div",17),s.Rb(21,"div",18),s.Rb(22,"label",19),s.Gc(23,"fecha Inicio"),s.Qb(),s.Mb(24,"input",20),s.Qb(),s.Qb(),s.Rb(25,"div",17),s.Rb(26,"div",18),s.Rb(27,"label",19),s.Gc(28,"Hora Inicio"),s.Qb(),s.Mb(29,"input",21),s.Qb(),s.Qb(),s.Rb(30,"div",17),s.Rb(31,"div",18),s.Rb(32,"label",19),s.Gc(33,"Fecha Fin"),s.Qb(),s.Mb(34,"input",20),s.Qb(),s.Qb(),s.Rb(35,"div",17),s.Rb(36,"div",18),s.Rb(37,"label",19),s.Gc(38,"Hora Fin"),s.Qb(),s.Mb(39,"input",21),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e){const e=s.ec();s.zb(3),s.Ic("agenda de ",e.profesionalSeleccionado.name,""),s.zb(3),s.Ic(" tiempo programado para el servicio en minutos ",e.tipoproductoSeleccionado.tiempo," ")}}let ee=(()=>{class e{constructor(e,t){this._TipoproductosService=e,this._TipoproductosuserService=t,this.tipoproductosList=[],this.tipoproductoUserList=[],this.habilitarSeccionSeleccionado=!1,this.loading=!0}ngOnInit(){this.loadTipoProductos()}loadTipoProductos(){this.loading=!0,this.habilitarSeccionSeleccionado=!1,this._TipoproductosService.getLista().subscribe(e=>{this.tipoproductosList=e,this.loading=!1},e=>{console.log("ha ocurrido un error en bgtable component "),console.log("error ",e),this.loading=!1},()=>{})}getProfesionalsAssoc(e){this.loading=!0,this._TipoproductosuserService.getTipoProductoByUser(e.id).subscribe(t=>{this.tipoproductoUserList=t,this.tipoproductoSeleccionado=e,this.loading=!1},e=>{console.log("ha ocurrido un error en bgtable component "),console.log("error ",e),this.loading=!1},()=>{})}agendaProfesional(e){this.profesionalSeleccionado=e,this.habilitarSeccionSeleccionado=!0}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(x),s.Lb(J))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-programaragenda"]],decls:12,vars:4,consts:[[1,"container-fluid","fz-11"],[4,"ngIf"],[1,"row"],[1,"col-md-2","col-lg-2","col-xs-12","border","border-default"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"col-md-10","col-lg-10","col-xs-12","border","border-default"],["class","row",4,"ngIf"],[1,"list-group-item",3,"click"],[1,"badge","badge-secondary"],[1,"col-md-12"],[1,"col-md-4"],["type","checkbox","checked",""],["name","modalidad","id","modalidad",1,"form-control"],["value",""],["value","1"],["value","2"],[1,"col-md-3"],[1,"form-group"],["for","exampleInputEmail1"],["type","date","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter email",1,"form-control"],["type","number","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter email",1,"form-control"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Ec(1,W,1,0,"app-loading",1),s.Rb(2,"div",2),s.Rb(3,"div",3),s.Rb(4,"div",2),s.Rb(5,"ul",4),s.Ec(6,Y,4,2,"li",5),s.Qb(),s.Qb(),s.Qb(),s.Rb(7,"div",6),s.Rb(8,"div",2),s.Rb(9,"ul",4),s.Ec(10,K,2,1,"li",5),s.Qb(),s.Qb(),s.Ec(11,X,40,2,"div",7),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(1),s.lc("ngIf",t.loading),s.zb(5),s.lc("ngForOf",t.tipoproductosList),s.zb(4),s.lc("ngForOf",t.tipoproductoUserList),s.zb(1),s.lc("ngIf",t.habilitarSeccionSeleccionado&&t.tipoproductoUserList.length>0))},directives:[i.o,i.n,C.a,v.p,v.u],styles:[""]}),e})();var te=o("nwwe");function oe(e,t){1&e&&s.Mb(0,"app-loading")}function ie(e,t){if(1&e){const e=s.Sb();s.Rb(0,"app-bgtable",2),s.cc("editarAction",(function(t){return s.vc(e),s.ec().editarSolicitud(t)}))("nuevoAction",(function(t){return s.vc(e),s.ec().agregarSolicitud(t)}))("eliminarAction",(function(t){return s.vc(e),s.ec().eliminar(t)}))("copiarAction",(function(t){return s.vc(e),s.ec().programar(t)})),s.Qb()}if(2&e){const e=s.ec();s.lc("tableConfig",e.tableConfig)}}let ae=(()=>{class e{constructor(e,t){this.route=e,this.router=t,this.loading=!1,this.buttons={acciones:{edit:!0,delete:!0,copy:{label:"programar",icon:"fa fa-tasks",class:"btn btn-success btn-sm"},new:!1},exports:[]},this.columns=[{title:"Id",data:"id",orderable:!1,searchable:!1,type:"text"},{title:"Tipo Producto",data:"tipoproducto.name",orderable:!1,searchable:!1,type:"text"},{title:"cantidad",data:"cantidad",orderable:!1,searchable:!1,type:"text"},{title:"regional",data:"regional.nombre",orderable:!1,searchable:!1,type:"text"},{title:"Contrato",data:"contrato.nombre",orderable:!1,searchable:!1,type:"text"},{title:"Programador",data:"profesional.name",orderable:!1,searchable:!1,type:"text"},{title:"Descripci\xf3n",data:"descripcion",orderable:!1,searchable:!1,type:"text"}],this.tableConfig={buttons:this.buttons,listado_seleccion:!0,columns:this.columns,url:l.a.apiUrl+l.a.solicitud.getAll,globalSearch:!1,rowSearch:!1,advancedSearch:!0,paginatorPosition:"bottom",customFilters:[]}}ngOnInit(){}agregarSolicitud(e){}editarSolicitud(e){}eliminar(e){}programar(e){this.router.navigate(["/pea/solicitudproductos"],{queryParams:{id:e.id}})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(r.a),s.Lb(r.c))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-solicitud-listar"]],viewQuery:function(e,t){var o;1&e&&s.Lc(te.a,!0),2&e&&s.tc(o=s.dc())&&(t.dataTableReload=o.first)},decls:2,vars:2,consts:[[4,"ngIf"],[3,"tableConfig","editarAction","nuevoAction","eliminarAction","copiarAction",4,"ngIf"],[3,"tableConfig","editarAction","nuevoAction","eliminarAction","copiarAction"]],template:function(e,t){1&e&&(s.Ec(0,oe,1,0,"app-loading",0),s.Ec(1,ie,1,1,"app-bgtable",1)),2&e&&(s.lc("ngIf",t.loading),s.zb(1),s.lc("ngIf",!t.loading))},directives:[i.o,C.a,te.a],styles:[""],encapsulation:2}),e})();var re=o("I83f"),ne=o.n(re);let se=(()=>{class e{constructor(e){this._http=e}postAgendaProfesional(e,t){return this._http.post(l.a.apiUrl+l.a.agenda.getAgendaProfesional+e,t).pipe(Object(g.a)(e=>e))}postAgendaProfesionalAllProfesional(e){return this._http.post(l.a.apiUrl+l.a.agenda.postAgendaDisponibleAllProfesional,e).pipe(Object(g.a)(e=>e))}postAgenda(e,t){return null==t.id?this._http.post(l.a.apiUrl+l.a.agenda.postAgendaProfesional+e,t):this._http.put(l.a.apiUrl+l.a.agenda.putAgendaProfesional+t.id,t)}postCita(e){return this._http.post(l.a.apiUrl+l.a.agenda.postCita,e)}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ce(e,t){1&e&&(s.Rb(0,"div"),s.Mb(1,"app-loading"),s.Qb())}function le(e,t){1&e&&(s.Rb(0,"span"),s.Gc(1," Nuevo Agenda "),s.Qb())}function de(e,t){1&e&&(s.Rb(0,"span"),s.Gc(1," Editar Agenda "),s.Qb())}function be(e,t){if(1&e&&(s.Rb(0,"option",36),s.Gc(1),s.Qb()),2&e){const e=t.$implicit;s.lc("value",e.id),s.zb(1),s.Ic(" ",e.nombre," ")}}function ue(e,t){1&e&&(s.Rb(0,"small",40),s.Gc(1,"el campo comentario bloqueo no debe estar vac\xedo."),s.Qb())}function pe(e,t){1&e&&(s.Rb(0,"small",40),s.Gc(1,"el campo comentario debe ser mayor a 5 caracteres."),s.Qb())}function me(e,t){1&e&&(s.Rb(0,"small",40),s.Gc(1,"el campo comentario debe ser menor a 25 caracteres."),s.Qb())}function fe(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,ue,2,0,"small",39),s.Ec(2,pe,2,0,"small",39),s.Ec(3,me,2,0,"small",39),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.formulario.get("razon_bloqueo").hasError("required")),s.zb(1),s.lc("ngIf",e.formulario.get("razon_bloqueo").hasError("minlength")),s.zb(1),s.lc("ngIf",e.formulario.get("razon_bloqueo").hasError("maxlength"))}}function he(e,t){if(1&e&&(s.Rb(0,"div",8),s.Rb(1,"div",10),s.Rb(2,"label",11),s.Gc(3,"Comentario Bloqueo"),s.Qb(),s.Rb(4,"div",12),s.Rb(5,"div",13),s.Rb(6,"span",14),s.Mb(7,"i",37),s.Qb(),s.Qb(),s.Mb(8,"input",38),s.Qb(),s.Ec(9,fe,4,3,"div",0),s.Qb(),s.Qb()),2&e){const e=s.ec();s.zb(8),s.lc("maxlength",25),s.zb(1),s.lc("ngIf",e.formulario.get("razon_bloqueo").errors&&e.formulario.get("razon_bloqueo").touched)}}let ge=(()=>{class e{constructor(e,t,o,i,a){this.FormBuilder=e,this._activeModal=t,this._ToastService=o,this._UtilService=i,this._AgendaService=a,this.loading=!1,this.daysRepeat=[{id:1,name:"Lun",nameLong:"Lunes",visible:!0,checked:!1},{id:2,name:"Mar",nameLong:"Martes",visible:!0,checked:!1},{id:3,name:"Mi",nameLong:"Miercoles",visible:!0,checked:!1},{id:4,name:"Jue",nameLong:"Jueves",visible:!0,checked:!1},{id:5,name:"Vi",nameLong:"viernes",visible:!0,checked:!1}],this.respuesta={status:"close",data:[]},this.tiposLista=[{id:1,nombre:"Disponible"},{id:2,nombre:"Bloqueo"},{id:3,nombre:"Informe"}]}ngOnInit(){this.buildForm(),this.loading=!1,this.setUserCategoryValidators()}get ordersFormArray(){return this.formulario.controls.daysRepeat}buildForm(){var e;let t=null,o=null,i=null,a=null,r=null,n=null,s=null,c=null;this.data&&(t=this.data.id,o=this.data.profesional_id,i=this.data.profesional,c=null===(e=this.data.extendedprops)||void 0===e?void 0:e.razon_bloqueo,a=`${parseInt(this.data.start.split("/")[2])}-${parseInt(this.data.start.split("/")[1])}-${parseInt(this.data.start.split("/")[0])}`,n=`${parseInt(this.data.end.split("/")[2])}-${parseInt(this.data.end.split("/")[1])}-${parseInt(this.data.end.split("/")[0])}`,s=this.data.tipo,r={hour:this.data.start_time.split(":")[0],minute:this.data.start_time.split(":")[1]});let l={hour:parseInt(this.data.start_time.split(":")[0]),minute:parseInt(this.data.start_time.split(":")[1]),second:0};this.start_time=Object.assign({},l);let d={hour:parseInt(this.data.end_time.split(":")[0]),minute:parseInt(this.data.end_time.split(":")[1]),second:0};this.end_time=Object.assign({},d),this.formulario=this.FormBuilder.group({id:[t],profesional_id:[o,[v.t.required]],profesional:[i,[v.t.required]],start:[a],start_time:[r],end:[n,[v.t.required]],end_time:[],tipo:[s,[v.t.required]],razon_bloqueo:[c],daysRepeat:new v.b([]),repeat_end:[n]}),this.addCheckboxes()}addCheckboxes(){this.daysRepeat.forEach(()=>this.ordersFormArray.push(new v.d(!1)))}setUserCategoryValidators(){const e=this.formulario.get("razon_bloqueo");this.formulario.get("tipo").valueChanges.subscribe(t=>{e.setValidators(t>1?[v.t.required,v.t.minLength(5),v.t.maxLength(25)]:null),e.updateValueAndValidity()})}guardar(e){if(e.preventDefault(),this.formulario.valid){let e=null;!this.data.id||2!=this.data.tipo&&3!=this.data.tipo||(console.log("es un evento valido para actualizar"),e=1);const t=this.formulario.value.daysRepeat.map((e,t)=>e?this.daysRepeat[t].id:null).filter(e=>null!==e);let o=Object.assign(Object.assign({},this.formulario.value),{selectedDays:t,extendedprops:this.data.extendedprops});o.start=this._UtilService.formatearFechaGuardar(o.start,o.start_time),o.end=this._UtilService.formatearFechaGuardar(o.end,o.end_time),this._UtilService.confirm({title:"Guardar Agenda",message:"Seguro que desea guardar esta agenda?"}).then(()=>{this.loading=!0,this._AgendaService.postAgenda(this.formulario.get("profesional_id").value,o).subscribe(e=>{if("ok"==e.status&&(this.respuesta={status:"ok",data:e},this._ToastService.success("agenda "+e.msg+" correctamente")),"error"==e.status){let t=this._ToastService.errorMessage(e.msg);this._ToastService.danger(t)}"errorocupado"!=e.status&&"errortime"!=e.status||this._ToastService.warning(e.msg),this.loading=!1})},()=>{this.loading=!1})}else this.formulario.markAllAsTouched()}closeModal(){this._activeModal.close(this.respuesta)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(v.c),s.Lb(R.b),s.Lb(M.a),s.Lb(S.a),s.Lb(se))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-nueva-agenda-profesional"]],inputs:{data:"data"},decls:91,vars:27,consts:[[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"fa","fa-close"],[1,"modal-body",2,"min-height","380px"],[1,"row"],[1,"col-md-12"],[1,"col-md-6"],[1,"form-group"],["for","regional"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","start","id","start","formControlName","start","readonly","","ngbDatepicker","",1,"form-control","form-control-sm"],["d","ngbDatepicker"],[1,"fa","fa-clock-o"],["formControlName","start_time",3,"ngModel","spinners","size","ngModelChange"],["type","text","name","end","id","end","formControlName","end","readonly","","ngbDatepicker","",1,"form-control","form-control-sm"],["d2","ngbDatepicker"],["formControlName","end_time",3,"ngModel","spinners","size","ngModelChange"],[1,"fa","fa-map"],["type","text","name","tipo","id","tipo","formControlName","tipo",1,"form-control","form-control-sm"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","col-md-12",4,"ngIf"],[1,"col-md-12","mt-2"],["type","text","name","start","id","start","formControlName","repeat_end","readonly","","ngbDatepicker","",1,"form-control","form-control-sm"],["repeat_end","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary","btn-sm","calendar",3,"click"],[1,"modal-footer"],[1,"col-12","col-lg-12","col-md-12","text-right"],["type","button",1,"btn","btn-dark",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[3,"value"],[1,"fa","fa-comment"],["type","text","name","razon_bloqueo","id","razon_bloqueo","formControlName","razon_bloqueo",1,"form-control","form-control-sm",3,"maxlength"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"]],template:function(e,t){if(1&e){const e=s.Sb();s.Ec(0,ce,2,0,"div",0),s.Rb(1,"form",1),s.cc("ngSubmit",(function(e){return t.guardar(e)})),s.Rb(2,"div",2),s.Rb(3,"h3",3),s.Ec(4,le,2,0,"span",0),s.Ec(5,de,2,0,"span",0),s.Qb(),s.Rb(6,"button",4),s.cc("click",(function(){return t.closeModal()})),s.Mb(7,"i",5),s.Qb(),s.Qb(),s.Rb(8,"div",6),s.Rb(9,"div",7),s.Mb(10,"div",8),s.Qb(),s.Rb(11,"div",7),s.Rb(12,"div",9),s.Rb(13,"div",10),s.Rb(14,"label",11),s.Gc(15,"inicio (d/m/Y)"),s.Qb(),s.Gc(16),s.fc(17,"json"),s.Rb(18,"div",12),s.Rb(19,"div",13),s.Rb(20,"span",14),s.Mb(21,"i",15),s.Qb(),s.Qb(),s.Mb(22,"input",16,17),s.Qb(),s.Qb(),s.Qb(),s.Rb(24,"div",9),s.Rb(25,"div",10),s.Rb(26,"label",11),s.Gc(27,"Hora inicio"),s.Qb(),s.Rb(28,"div",12),s.Rb(29,"div",13),s.Rb(30,"span",14),s.Mb(31,"i",18),s.Qb(),s.Qb(),s.Rb(32,"ngb-timepicker",19),s.cc("ngModelChange",(function(e){return t.start_time=e})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(33,"div",9),s.Rb(34,"div",10),s.Rb(35,"label",11),s.Gc(36,"Final (d/m/Y)"),s.Qb(),s.Rb(37,"div",12),s.Rb(38,"div",13),s.Rb(39,"span",14),s.Mb(40,"i",15),s.Qb(),s.Qb(),s.Mb(41,"input",20,21),s.Qb(),s.Qb(),s.Qb(),s.Rb(43,"div",9),s.Rb(44,"div",10),s.Rb(45,"label",11),s.Gc(46,"Hora Fin"),s.Qb(),s.Rb(47,"div",12),s.Rb(48,"div",13),s.Rb(49,"span",14),s.Mb(50,"i",18),s.Qb(),s.Qb(),s.Rb(51,"ngb-timepicker",22),s.cc("ngModelChange",(function(e){return t.end_time=e})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(52,"div",9),s.Rb(53,"div",10),s.Rb(54,"div"),s.Gc(55),s.Qb(),s.Rb(56,"label",11),s.Gc(57,"Tipo"),s.Qb(),s.Rb(58,"div",12),s.Rb(59,"div",13),s.Rb(60,"span",14),s.Mb(61,"i",23),s.Qb(),s.Qb(),s.Rb(62,"select",24),s.Rb(63,"option",25),s.Gc(64," Seleccione tipo de producto "),s.Qb(),s.Ec(65,be,2,2,"option",26),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Ec(66,he,10,2,"div",27),s.Rb(67,"div",28),s.Rb(68,"div",7),s.Rb(69,"div",8),s.Rb(70,"div",10),s.Rb(71,"label",11),s.Gc(72),s.fc(73,"date"),s.fc(74,"date"),s.Qb(),s.Rb(75,"div",12),s.Rb(76,"div",13),s.Rb(77,"span",14),s.Mb(78,"i",15),s.Qb(),s.Qb(),s.Mb(79,"input",29,30),s.Rb(81,"button",31),s.cc("click",(function(){return s.vc(e),s.uc(80).toggle()})),s.Gc(82," ... "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(83,"div",32),s.Rb(84,"div",7),s.Rb(85,"div",33),s.Rb(86,"button",34),s.cc("click",(function(){return t.closeModal()})),s.Gc(87," Salir"),s.Qb(),s.Gc(88,"\xa0 "),s.Rb(89,"button",35),s.Gc(90," Guardar "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}2&e&&(s.lc("ngIf",t.loading),s.zb(1),s.lc("formGroup",t.formulario),s.zb(3),s.lc("ngIf",!t.formulario.get("id").value),s.zb(1),s.lc("ngIf",t.formulario.get("id").value),s.zb(11),s.Jc(" ",s.gc(17,19,t.data)," el idddd ",t.formulario.get("id").value," "),s.zb(16),s.lc("ngModel",t.start_time)("spinners",!1)("size","small"),s.zb(19),s.lc("ngModel",t.end_time)("spinners",!1)("size","small"),s.zb(4),s.Ic("Valid: ",t.formulario.valid?"\u{1f44d}":"\u{1f44e}",""),s.zb(8),s.lc("ngValue",null),s.zb(2),s.lc("ngForOf",t.tiposLista),s.zb(1),s.lc("ngIf",t.formulario.get("tipo").value>1),s.zb(6),s.Jc("repetir desde ",s.hc(73,21,t.formulario.get("start").value,"dd/MM/yyyy")," hasta ",s.hc(74,24,t.formulario.get("repeat_end").value,"dd/MMMM/yyyy")," "),s.zb(17),s.lc("disabled",t.formulario.invalid||t.loading))},directives:[i.o,v.v,v.m,v.f,v.a,R.j,v.l,v.e,R.q,v.s,v.p,v.u,i.n,C.a,v.h],pipes:[i.i,i.e],styles:[""]}),e})();var ve=o("IvIE"),Re=o("Owqu");const Qe=["calendar"];function _e(e,t){1&e&&(s.Rb(0,"div"),s.Mb(1,"app-loading"),s.Qb())}function ye(e,t){if(1&e&&s.Mb(0,"full-calendar",14,15),2&e){const e=s.ec();s.lc("options",e.calendarOptions)}}function Ge(e,t){if(1&e&&(s.Rb(0,"p",16),s.Mb(1,"i",17),s.Gc(2),s.Qb()),2&e){const e=s.ec();s.zb(2),s.Ic(" ",e.profesionalSeleccionado.nombre," ")}}function Me(e,t){1&e&&(s.Rb(0,"p",16),s.Mb(1,"i",17),s.Gc(2," no ha seleccionado Profesional "),s.Qb())}function Se(e,t){if(1&e){const e=s.Sb();s.Rb(0,"a",18),s.cc("click",(function(){s.vc(e);const o=t.$implicit;return s.ec().seleccionadoProfesional(o)})),s.Gc(1),s.fc(2,"titlecase"),s.Qb()}if(2&e){const e=t.$implicit,o=t.index,i=s.ec();s.lc("ngClass",i.profesionalSeleccionado&&i.profesionalSeleccionado.id==e.id?"active":""),s.zb(1),s.Ic(" ",s.gc(2,2,o+1+"). "+e.nombre)," ")}}const xe=function(e){return{nombre:e}};let Ie=(()=>{class e{constructor(e,t,o,i,a,r){this._AgendaService=e,this._UtilService=t,this._ComunService=o,this._ToastService=i,this.modalService=a,this.locale=r,this.urlProfesionales=l.a.apiUrl+l.a.comun.buscarUsers+"?profile=3",this.profesionalesList=[],this.buscarProfesional="",this.agendaProfesional=[],this.loading=!1,this.calendarVisible=!0,this.calendarOptions={headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},customButtons:{prev:{text:"<",click:this.getPrevEvents.bind(this)},next:{text:">",click:this.getNextEvents.bind(this)},dayGridMonth:{text:"Mes",click:()=>{this.calendarComponent.getApi().changeView("dayGridMonth"),this.changeViewRender()}},timeGridWeek:{text:"Semana",click:()=>{this.calendarComponent.getApi().changeView("timeGridWeek"),this.changeViewRender()}},timeGridDay:{text:"D\xeda",click:()=>{this.calendarComponent.getApi().changeView("timeGridDay"),this.changeViewRender()}},listWeek:{text:"Agenda",click:()=>{this.calendarComponent.getApi().changeView("listWeek"),this.changeViewRender()}}},slotDuration:"00:15:00",slotLabelInterval:"00:15:00",hiddenDays:[6,0],eventOverlap:!0,droppable:!1,editable:!1,businessHours:{daysOfWeek:[1,2,3,4,5],startTime:"07:00:00",endTime:"17:20:00"},slotMinTime:"06:00",slotMaxTime:"18:00:00",slotLabelFormat:[{hour:"2-digit",minute:"2-digit",omitZeroMinute:!1,meridiem:"short"}],locale:ne.a,initialView:"timeGridWeek",events:[],weekends:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect.bind(this),eventClick:this.handleEventClick.bind(this),eventsSet:this.handleEvents.bind(this),eventAdd:this.handleEventsAdd.bind(this)},this.currentEvents=[]}ngAfterViewInit(){this.calendarApi=this.calendarComponent.getApi(),this.formatDateView(this.calendarApi.view)}ngOnInit(){this.loadForProfesionales()}activeLi(e){if(this.profesionalSeleccionado&&this.profesionalSeleccionado.id==e)return"active"}loadForProfesionales(){this.loading=!0,this._ComunService.getUsersAll(3).subscribe(e=>{this.profesionalesList=e,this.loading=!1},e=>{this.loading=!1},()=>{this.loading=!1})}validateLoadData(){return!(!this.profesionalSeleccionado||!this.calendarComponent)}changeViewRender(){this.calendarApi=this.calendarComponent.getApi(),this.validateLoadData&&this.formatDateView(this.calendarApi.view),this.getAgendaProfesional(this.profesionalSeleccionado.id)}getPrevEvents(e){this.validateLoadData&&(this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.prev(),this.formatDateView(this.calendarApi.view),this.getAgendaProfesional(this.profesionalSeleccionado.id),this.calendarApi.render())}getNextEvents(e){this.validateLoadData&&(this.calendarApi=this.calendarComponent.getApi(),this.calendarApi.next(),this.formatDateView(this.calendarApi.view),this.getAgendaProfesional(this.profesionalSeleccionado.id),this.calendarApi.render())}handleMonthChange(e){console.log("informacdi\xf3n sue ",e)}handleCalendarToggle(){this.calendarVisible=!this.calendarVisible}convertirFecha(e){var t=e.getDate(),o=e.getMonth()+1;return(t<=9?"0"+t:t)+"-"+(o<=9?"0"+o:o)+"-"+e.getFullYear()}handleWeekendsToggle(){const{calendarOptions:e}=this;e.weekends=!e.weekends}handleDateSelect(e){if(console.log("handle date select"),!this.profesionalSeleccionado)return void this._ToastService.info("debe seleccionar primero un profesional");const t=e.view.calendar;if("dayGridMonth"==t.view.type)return void this._ToastService.info("no se pueden agregar eventos desde la vista mensual");let o=t.formatDate(e.startStr,{month:"2-digit",year:"numeric",day:"2-digit"}),i=t.formatDate(e.startStr,{hour:"2-digit",minute:"2-digit",second:"2-digit"}),a=t.formatDate(e.endStr,{month:"2-digit",year:"numeric",day:"2-digit"}),r=t.formatDate(e.endStr,{hour:"2-digit",minute:"2-digit",second:"2-digit"});const n=this.modalService.open(ge,{backdrop:"static",size:"xs",keyboard:!1});n.componentInstance.data={id:null,profesional_id:this.profesionalSeleccionado.id,profesional:this.profesionalSeleccionado.nombre,start:o,start_time:i,end:a,end_time:r,tipo:null,extendedprops:null},n.result.then(e=>{"ok"==e.status&&(console.log("afuera",e.data.data),this.getAgendaProfesional(this.profesionalSeleccionado.id))}).catch(e=>{})}formatearHora(e){let t=e.split(" ");return t[1].split(":")[0]+":"+t[1].split(":")[1]}handleEventClick(e){if(console.log("ingresaste manuelf ",e.event),console.log("valores ",e.event.start),"decitasproducto"==e.event.extendedProps.origen)return void this._ToastService.info("este evento no se puede editar");let t=Object(i.z)(e.event.startStr,"dd/MM/yyyy H:m:s",this.locale),o=Object(i.z)(e.event.endStr,"dd/MM/yyyy H:m:s",this.locale),a=this.formatearHora(t),r=this.formatearHora(o);const n=this.modalService.open(ge,{backdrop:"static",size:"xs",keyboard:!1});let s={id:e.event.id,profesional_id:this.profesionalSeleccionado.id,profesional:this.profesionalSeleccionado.nombre,start:t.split(" ")[0],start_time:a,end:o.split(" ")[0],end_time:r,tipo:e.event.extendedProps.tipo,extendedprops:e.event.extendedProps};console.log("esta es la infooo ",s),n.componentInstance.data=s,n.result.then(e=>{"ok"==e.status&&this.getAgendaProfesional(this.profesionalSeleccionado.id)}).catch(e=>{})}formatDateView(e){this.startDateView=Object(i.z)(e.currentStart,"yyyy-MM-dd",this.locale),this.endDateView=Object(i.z)(e.currentEnd,"yyyy-MM-dd",this.locale)}handleEvents(e){this.currentEvents=e,console.log("los eventos ",this.currentEvents),this.calendarComponent&&(this.calendarApi=this.calendarComponent.getApi(),this.formatDateView(this.calendarApi.view))}handleEventsAdd(e){console.log("nada eventsadd ",e)}agregarAgenda(e){console.log("el evento ",e),this.modalService.open(ge,{backdrop:"static",size:"lg",keyboard:!1}).result.then(e=>{}).catch(e=>{})}loadForProfesional(){return this.agendaProfesional}seleccionadoProfesional(e){this.loading=!0,this.profesionalSeleccionado=e,this.agendaProfesional=[],this.getAgendaProfesional(e.id)}getAgendaProfesional(e){let t={startDateView:this.startDateView,endDateView:this.endDateView};this.loading=!0,this._AgendaService.postAgendaProfesional(e,t).subscribe(e=>{this.calendarVisible=!0,this.calendarOptions.events=e.data,this.agendaProfesional=e.data,"ok"==e.status?this._ToastService.success(e.msg):this._ToastService.warning(e.msg),this.loading=!1},e=>{this.loading=!1},()=>{this.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(se),s.Lb(S.a),s.Lb(I),s.Lb(M.a),s.Lb(R.k),s.Lb(s.u))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-generar-agenda"]],viewQuery:function(e,t){var o;1&e&&s.Lc(Qe,!0),2&e&&s.tc(o=s.dc())&&(t.calendarComponent=o.first)},decls:18,vars:12,consts:[[4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[1,"col-md-9"],[3,"options",4,"ngIf"],[1,"col-md-3"],[1,"form-group"],["for","profesional",1,"text-secondary"],[1,"mb-1"],["type","text","placeholder","Busca Profesional","id","buscarprofesional","name","buscarprofesional",1,"rounded","float-right","form-control","mb-3",3,"ngModel","ngModelChange"],["class","font-weight-bold text-right",4,"ngIf"],[1,"list-group","mt-1"],["class","list-group-item list-group-item-action",3,"ngClass","click",4,"ngFor","ngForOf"],[3,"options"],["calendar",""],[1,"font-weight-bold","text-right"],[1,"fa","fa-user-o","text-success"],[1,"list-group-item","list-group-item-action",3,"ngClass","click"]],template:function(e,t){1&e&&(s.Ec(0,_e,2,0,"div",0),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Mb(3,"div",3),s.Qb(),s.Rb(4,"div",2),s.Rb(5,"div",4),s.Ec(6,ye,2,1,"full-calendar",5),s.Qb(),s.Rb(7,"div",6),s.Rb(8,"div",7),s.Rb(9,"label",8),s.Gc(10,"Profesional:"),s.Qb(),s.Rb(11,"div",9),s.Rb(12,"input",10),s.cc("ngModelChange",(function(e){return t.buscarProfesional=e})),s.Qb(),s.Qb(),s.Ec(13,Ge,3,1,"p",11),s.Ec(14,Me,3,0,"p",11),s.Qb(),s.Rb(15,"ul",12),s.Ec(16,Se,3,4,"a",13),s.fc(17,"filterfor"),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.lc("ngIf",t.loading),s.zb(6),s.lc("ngIf",t.calendarVisible),s.zb(6),s.lc("ngModel",t.buscarProfesional),s.zb(1),s.lc("ngIf",t.profesionalSeleccionado),s.zb(1),s.lc("ngIf",!t.profesionalSeleccionado),s.zb(2),s.lc("ngForOf",s.ic(17,6,t.profesionalesList,s.pc(10,xe,t.buscarProfesional),!1)))},directives:[i.o,v.a,v.l,v.o,i.n,C.a,ve.a,i.m],pipes:[Re.a,i.w],styles:[""]}),e})();function ze(e,t){1&e&&(s.Rb(0,"div"),s.Mb(1,"app-loading"),s.Qb())}function Ce(e,t){1&e&&(s.Rb(0,"small",34),s.Gc(1,"el campo hora fin no debe estar vac\xedo."),s.Qb())}function ke(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,Ce,2,0,"small",33),s.Qb()),2&e){const e=s.ec();s.zb(1),s.lc("ngIf",e.formulario.get("end_time").hasError("required"))}}function Ee(e,t){1&e&&(s.Rb(0,"small",34),s.Gc(1,"el campo hora fin no debe estar vac\xedo."),s.Qb())}function Ae(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,Ee,2,0,"small",33),s.Qb()),2&e){const e=s.ec();s.zb(1),s.lc("ngIf",e.formulario.get("block_cita").hasError("required"))}}let we=(()=>{class e{constructor(e,t,o,i,a){this.FormBuilder=e,this._activeModal=t,this._ToastService=o,this._UtilService=i,this._AgendaService=a,this.loading=!1,this.respuesta={status:"close",data:[]}}ngOnInit(){this.buildForm(),this.loading=!1}buildForm(){let e=null,t=null,o=null;if(this.data){console.log("la data ",this.data),e=this.data.cita.onlydate,o=this.data.cita.onlydate;let i=this.data.cita.start.split(" ")[1];t={hour:i.split(":")[0],minute:i.split(":")[1]};let a={hour:parseInt(i.split(":")[0]),minute:parseInt(i.split(":")[1]),second:0};this.start_time=Object.assign({},a),this.data.cita.end.split(" ")}this.formulario=this.FormBuilder.group({id:[null],start:[e],start_time:[t],end:[o,[v.t.required]],end_time:[null,[v.t.required]],block_cita:[1,[v.t.required]]})}closeModal(){this._activeModal.close(this.respuesta)}guardar(e){if(e.preventDefault(),this.formulario.valid){let e=Object.assign(Object.assign({ocupado:2,producto_id:this.data.persona.id,profesional_id:this.data.cita.profesional_id,agenda_id:this.data.cita.agenda_id},this.formulario.value),this.data);e.start=this._UtilService.formatearFechaGuardar(e.start,e.start_time),e.end=this._UtilService.formatearFechaGuardar(e.end,e.end_time),console.log("la data adata ",this.data),console.log("el valor para guardar ",e),this._UtilService.confirm({title:"Guardar Cita",message:"Seguro que desea guardar esta cita?"}).then(()=>{this.loading=!0,this._AgendaService.postCita(e).subscribe(e=>{if("ok"==e.status&&(this.respuesta={status:"ok",data:e},this._ToastService.success(e.msg)),"error"==e.status){let t=this._ToastService.errorMessage(e.msg);this._ToastService.danger(t)}"errorocupado"!=e.status&&"errortime"!=e.status||this._ToastService.warning(e.msg),this.loading=!1})},()=>{this.loading=!1})}else this.formulario.markAllAsTouched()}validarTiempoCita(){}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(v.c),s.Lb(R.b),s.Lb(M.a),s.Lb(S.a),s.Lb(se))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-nuevacita"]],inputs:{data:"data"},decls:92,vars:20,consts:[[4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"fa","fa-close"],[1,"modal-body",2,"min-height","380px"],[1,"row"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"col-md-6"],[1,"badge","badge-warning"],[1,"form-group"],["for","regional"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-calendar"],["type","text","name","start","id","start","formControlName","start","readonly","","ngbDatepicker","",1,"form-control","form-control-sm"],["d","ngbDatepicker"],[1,"fa","fa-clock-o"],["formControlName","start_time",3,"ngModel","spinners","size","ngModelChange"],["type","text","name","end","id","end","formControlName","end","readonly","","ngbDatepicker","",1,"form-control","form-control-sm"],["d2","ngbDatepicker"],["formControlName","end_time",3,"ngModel","spinners","size","ngModelChange"],["name","block_cita","id","block_cita","formControlName","block_cita",1,"form","form-control-sm"],["value","1"],["value","2"],[1,"modal-footer"],[1,"col-12","col-lg-12","col-md-12","text-right"],["type","button",1,"btn","btn-dark",3,"click"],["type","submit",1,"btn","btn-primary"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"]],template:function(e,t){1&e&&(s.Ec(0,ze,2,0,"div",0),s.Rb(1,"form",1),s.cc("ngSubmit",(function(e){return t.guardar(e)})),s.Rb(2,"div",2),s.Rb(3,"h3",3),s.Rb(4,"span"),s.Gc(5," Nueva Cita "),s.Qb(),s.Qb(),s.Rb(6,"button",4),s.cc("click",(function(){return t.closeModal()})),s.Mb(7,"i",5),s.Qb(),s.Qb(),s.Rb(8,"div",6),s.Rb(9,"div",7),s.Rb(10,"div",8),s.Gc(11),s.fc(12,"json"),s.Rb(13,"div",9),s.Gc(14),s.Qb(),s.Rb(15,"div",10),s.Rb(16,"div",7),s.Rb(17,"div",11),s.Gc(18),s.Qb(),s.Rb(19,"div",11),s.Gc(20),s.Qb(),s.Rb(21,"div",11),s.Gc(22),s.Qb(),s.Rb(23,"div",11),s.Gc(24),s.Qb(),s.Rb(25,"div",11),s.Gc(26," Tiempo servicio: "),s.Rb(27,"span",12),s.Gc(28),s.Qb(),s.Gc(29," minutos "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(30,"div",7),s.Rb(31,"div",11),s.Rb(32,"div",13),s.Rb(33,"label",14),s.Gc(34,"inicio (d/m/Y)"),s.Qb(),s.Rb(35,"div",15),s.Rb(36,"div",16),s.Rb(37,"span",17),s.Mb(38,"i",18),s.Qb(),s.Qb(),s.Mb(39,"input",19,20),s.Qb(),s.Qb(),s.Qb(),s.Rb(41,"div",11),s.Rb(42,"div",13),s.Rb(43,"label",14),s.Gc(44,"Hora inicio"),s.Qb(),s.Rb(45,"div",15),s.Rb(46,"div",16),s.Rb(47,"span",17),s.Mb(48,"i",21),s.Qb(),s.Qb(),s.Rb(49,"ngb-timepicker",22),s.cc("ngModelChange",(function(e){return t.start_time=e})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(50,"div",11),s.Rb(51,"div",13),s.Rb(52,"label",14),s.Gc(53,"Final (d/m/Y)"),s.Qb(),s.Rb(54,"div",15),s.Rb(55,"div",16),s.Rb(56,"span",17),s.Mb(57,"i",18),s.Qb(),s.Qb(),s.Mb(58,"input",23,24),s.Qb(),s.Qb(),s.Qb(),s.Rb(60,"div",11),s.Rb(61,"div",13),s.Rb(62,"label",14),s.Gc(63,"Hora Fin"),s.Qb(),s.Rb(64,"div",15),s.Rb(65,"div",16),s.Rb(66,"span",17),s.Mb(67,"i",21),s.Qb(),s.Qb(),s.Rb(68,"ngb-timepicker",25),s.cc("ngModelChange",(function(e){return t.end_time=e})),s.Qb(),s.Qb(),s.Ec(69,ke,2,1,"div",0),s.Qb(),s.Qb(),s.Rb(70,"div",11),s.Rb(71,"div",13),s.Rb(72,"label",14),s.Gc(73,"Bloquear 15 minutos siguientes"),s.Qb(),s.Rb(74,"div",15),s.Rb(75,"div",16),s.Rb(76,"span",17),s.Mb(77,"i",21),s.Qb(),s.Qb(),s.Rb(78,"select",26),s.Rb(79,"option",27),s.Gc(80,"Si"),s.Qb(),s.Rb(81,"option",28),s.Gc(82,"No"),s.Qb(),s.Qb(),s.Qb(),s.Ec(83,Ae,2,1,"div",0),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(84,"div",29),s.Rb(85,"div",7),s.Rb(86,"div",30),s.Rb(87,"button",31),s.cc("click",(function(){return t.closeModal()})),s.Gc(88," Salir"),s.Qb(),s.Gc(89,"\xa0 "),s.Rb(90,"button",32),s.Gc(91,"Crear Cita"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.lc("ngIf",t.loading),s.zb(1),s.lc("formGroup",t.formulario),s.zb(10),s.Ic(" ",s.gc(12,18,t.data)," "),s.zb(3),s.Jc(" realizado a: ",t.data.persona.nombre," C\xe9dula ",t.data.persona.cedula," "),s.zb(4),s.Ic(" Profesional : ",t.data.cita.profesional," "),s.zb(2),s.Ic(" ",t.data.odsDetalles.tipo_producto.name," "),s.zb(2),s.Ic("disponible desde: ",t.data.cita.start,""),s.zb(2),s.Ic("disponible hasta: ",t.data.cita.end,""),s.zb(4),s.Hc(t.data.odsDetalles.tipo_producto.tiempo),s.zb(21),s.lc("ngModel",t.start_time)("spinners",!1)("size","small"),s.zb(19),s.lc("ngModel",t.end_time)("spinners",!1)("size","small"),s.zb(1),s.lc("ngIf",t.formulario.get("end_time").errors&&t.formulario.get("end_time").touched),s.zb(14),s.lc("ngIf",t.formulario.get("block_cita").errors&&t.formulario.get("block_cita").touched))},directives:[i.o,v.v,v.m,v.f,v.a,R.j,v.l,v.e,R.q,v.s,v.p,v.u,C.a],pipes:[i.i],styles:[""]}),e})(),Pe=(()=>{class e{constructor(e){this._http=e}getSolicitudById(e){return this._http.get(l.a.apiUrl+l.a.productos.getByIdProductoRepso+e).pipe(Object(g.a)(e=>e))}getProductosBySolicitud(e,t){return this._http.post(l.a.apiUrl+l.a.productos.posByIdProductoRepso+e,t)}procesarExcelBySolicitud(e,t){return this._http.post(l.a.apiUrl+l.a.productos.getProcesarCargue+e,t).pipe(Object(g.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fe=(()=>{class e{constructor(e){this._http=e}getClienteByCedula(e){return this._http.get(l.a.apiUrl+l.a.comun.getClienteByCedula+e).pipe(Object(g.a)(e=>e))}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(a.b))},e.\u0275prov=s.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Oe=o("7pIB");function Le(e,t){if(1&e&&(s.Rb(0,"div",19),s.Gc(1),s.Qb()),2&e){const e=s.ec();s.zb(1),s.Ic("archivos permitidos ",e.accept_files_extension.toString(),"")}}function De(e,t){if(1&e&&(s.Rb(0,"div",19),s.Gc(1),s.Qb()),2&e){const e=s.ec();s.zb(1),s.Ic("peso m\xe1ximo ",e.max_size+"MB","")}}function qe(e,t){if(1&e&&(s.Rb(0,"td",23),s.Gc(1),s.fc(2,"number"),s.Qb()),2&e){const e=s.ec().$implicit;s.zb(1),s.Ic("",s.hc(2,1,(null==e||null==e.file?null:e.file.size)/1024/1024,".2")," MB")}}const Te=function(e){return{width:e}};function Ve(e,t){if(1&e&&(s.Rb(0,"td",25),s.Rb(1,"div",26),s.Mb(2,"div",27),s.Qb(),s.Qb()),2&e){const e=s.ec().$implicit;s.zb(2),s.lc("ngStyle",s.pc(1,Te,e.progress+"%"))}}function Ne(e,t){1&e&&(s.Rb(0,"span"),s.Mb(1,"i",28),s.Qb())}function Ue(e,t){1&e&&(s.Rb(0,"span"),s.Mb(1,"i",29),s.Qb())}function Be(e,t){1&e&&(s.Rb(0,"span"),s.Mb(1,"i",30),s.Qb())}function je(e,t){if(1&e){const e=s.Sb();s.Rb(0,"button",31),s.cc("click",(function(t){return s.vc(e),s.ec().$implicit.remove(),t.stopPropagation()})),s.Mb(1,"span",32),s.Gc(2," x "),s.Qb()}}function He(e,t){if(1&e&&(s.Rb(0,"tr"),s.Rb(1,"td"),s.Gc(2),s.Qb(),s.Ec(3,qe,3,4,"td",20),s.Ec(4,Ve,3,3,"td",21),s.Rb(5,"td",22),s.Ec(6,Ne,2,0,"span",12),s.Ec(7,Ue,2,0,"span",12),s.Ec(8,Be,2,0,"span",12),s.Qb(),s.Rb(9,"td",23),s.Ec(10,je,3,0,"button",24),s.Qb(),s.Qb()),2&e){const e=t.$implicit,o=s.ec();s.zb(2),s.Hc(null==e||null==e.file?null:e.file.name),s.zb(1),s.lc("ngIf",o.uploader.options.isHTML5),s.zb(1),s.lc("ngIf",o.uploader.options.isHTML5),s.zb(2),s.lc("ngIf",e.isSuccess),s.zb(1),s.lc("ngIf",e.isCancel),s.zb(1),s.lc("ngIf",e.isError),s.zb(2),s.lc("ngIf",o.uploader.getNotUploadedItems().length&&!e.isUploaded)}}function $e(e,t){if(1&e){const e=s.Sb();s.Rb(0,"button",36),s.cc("click",(function(t){return s.vc(e),s.ec(3).SubirArchivos(),t.stopPropagation()})),s.Mb(1,"span",37),s.Gc(2," Subir "),s.Qb()}if(2&e){const e=s.ec(3);s.lc("disabled",!e.uploader.getNotUploadedItems().length)}}function Ze(e,t){if(1&e){const e=s.Sb();s.Rb(0,"button",38),s.cc("click",(function(t){return s.vc(e),s.ec(3).uploader.clearQueue(),t.stopPropagation()})),s.Mb(1,"span",32),s.Gc(2," Remover "),s.Qb()}if(2&e){const e=s.ec(3);s.lc("disabled",!e.uploader.queue.length)}}function Je(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,$e,3,1,"button",34),s.Ec(2,Ze,3,1,"button",35),s.Qb()),2&e){const e=s.ec(2);s.zb(1),s.lc("ngIf",e.uploader.getNotUploadedItems().length),s.zb(1),s.lc("ngIf",e.uploader.getNotUploadedItems().length)}}function We(e,t){if(1&e&&(s.Rb(0,"div"),s.Rb(1,"div"),s.Rb(2,"div",33),s.Mb(3,"div",27),s.Qb(),s.Qb(),s.Ec(4,Je,3,2,"div",12),s.Qb()),2&e){const e=s.ec();s.zb(3),s.lc("ngStyle",s.pc(2,Te,e.uploader.progress+"%")),s.zb(1),s.lc("ngIf",!e.autoupload)}}const Ye=function(e){return{"nv-file-over":e}};let Ke=(()=>{class e{constructor(){this.multiple=!1,this.document_type="archivos",this.comment=null,this.title="Cargador Archivos",this.data={},this.fk_key=null,this.accept_files_extension=[],this.max_size=0,this.autoupload=!1,this.url2=null,this.archivos=[],this.archivos_count=[],this.urlapi=l.a.apiUrl+"files/uploads",this.error_archivos=!1,this.elementos_borrados=[],this.uploader=new Oe.d({url:this.urlapi,isHTML5:!0,method:"post"}),this.hasBaseDropZoneOver=!1,this.hasAnotherDropZoneOver=!1,this.response="",this.uploader.response.subscribe(e=>this.response=e),this.ArchivosCargados=new s.n}obtenerArchivos(){this.ArchivosCargados.emit(this.archivos)}ngOnInit(){this.uploader.onCompleteAll=()=>{console.log("por aqui")},this.uploader.onBuildItemForm=(e,t)=>{t.append("fk_key",this.fk_key),t.append("extra_data",this.data),t.append("document_type",this.document_type)},this.uploader.onCompleteItem=(e,t,o,i)=>{let a=JSON.parse(t);this.multiple||(this.archivos=[]),this.archivos.push({name:e.file.name,path:a.url,rename:a.file,data:a}),this.ArchivosCargados.emit(this.archivos)},this.autoupload&&this.uploader.setOptions({autoUpload:this.autoupload}),null!=this.url2&&this.uploader.setOptions({url:this.url2})}ngAfterViewInit(){this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1}}onFileSelected(e){if(this.validarArchivos(),!this.multiple)for(;this.uploader.queue.length>1;)this.uploader.queue[0].remove()}getFiles(){console.log(this.uploader.queue),this.validarRepetido()}echoFiles(){console.log(this.uploader.queue)}SubirArchivos(){this.uploader.queue.length>0&&(this.validarArchivos(),this.uploader.uploadAll())}validarArchivos(){this.elementos_borrados=[],this.validarSize(),this.validarExtension(),this.validarRepetido()}getContadores(){let e=[];for(let t=0;t<this.uploader.queue.length;t++){let o=0,i=!0;for(let a=0;a<this.uploader.queue.length;a++){this.uploader.queue[t].file.name==this.uploader.queue[a].file.name&&o++;for(let o=0;o<e.length;o++)e[o].name==this.uploader.queue[t].file.name&&1==i&&(i=!1)}1==i&&e.push({name:this.uploader.queue[t].file.name,contador:o})}for(let t=0;t<e.length;t++){let o=e[t].contador-1;for(;o>=1;)for(let i=this.uploader.queue.length-1;i>=0;i--)o>=1&&e[t].name==this.uploader.queue[i].file.name&&(this.uploader.queue[i].remove(),o--)}return e}validarRepetido(){this.archivos_count=this.getContadores()}validarExtension(){let e=!1,t=!1;if(this.accept_files_extension.length>0)for(let i=this.uploader.queue.length-1;i>=0;i--){if(t=!1,this.uploader.queue[i].file.name){var o=this.uploader.queue[i].file.name.split(".").pop();for(let i=this.accept_files_extension.length-1;i>=0;i--)o==this.accept_files_extension[i]&&(t=!0,e=!0)}0==t&&this.uploader.queue[i].remove()}}validarSize(){let e=!1;if(this.max_size>0){for(let t=this.uploader.queue.length-1;t>=0;t--)this.uploader.queue[t].file.size>1e3*this.max_size*1e3&&(this.uploader.queue[t].remove(),e||(e=!0));e&&alert("los archivos con tama\xf1o superior a "+this.max_size+" megas no son permitidos")}}fileOverBase(e){if(this.hasBaseDropZoneOver=e,!e)if(this.multiple)this.validarArchivos();else{for(;this.uploader.queue.length>1;)this.uploader.queue[0].remove();this.validarArchivos()}}fileOverAnother(e){this.hasAnotherDropZoneOver=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Fb({type:e,selectors:[["file-upload"]],inputs:{multiple:"multiple",document_type:"document_type",comment:"comment",title:"title",data:"data",fk_key:"fk_key",accept_files_extension:"accept_files_extension",max_size:"max_size",autoupload:"autoupload",url2:"url2"},outputs:{ArchivosCargados:"ArchivosCargados"},decls:35,vars:12,consts:[[1,"container"],[1,"row"],["type","file","ng2FileSelect","",1,"",2,"display","none",3,"uploader","multiple","onFileSelected"],["FileInput",""],[2,"display","none"],[3,"click"],[1,"col-md-12",3,"click"],["ng2FileDrop","",1,"bg-gray","my-drop-zone",3,"ngClass","uploader","fileOver"],["class","col-md-6","style","color:#000000; font-size:10px;",4,"ngIf"],[2,"color","#E91E63"],["align","center",1,"",2,"font-size","11px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-12",2,"margin-bottom","40px"],[1,"row",2,"display","none"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"col-md-6",2,"color","#000000","font-size","10px"],["nowrap","",4,"ngIf"],["width","50",4,"ngIf"],[1,"text-center"],["nowrap",""],["title","quitar este archivo","type","button","class","btn btn-danger btn-sm",3,"click",4,"ngIf"],["width","50"],[1,"progress",2,"margin-bottom","0"],["role","progressbar",1,"progress-bar",3,"ngStyle"],[1,"glyphicon","glyphicon-ok"],[1,"glyphicon","glyphicon-ban-circle"],[1,"glyphicon","glyphicon-remove"],["title","quitar este archivo","type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"glyphicon","glyphicon-trash"],[1,"progress","mb-1",2,"height","3px","display","none"],["type","button","class","btn btn-success btn-sm",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-danger btn-sm",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"glyphicon","glyphicon-upload"],["type","button",1,"btn","btn-danger","btn-sm",3,"disabled","click"]],template:function(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"input",2,3),s.cc("onFileSelected",(function(e){return t.onFileSelected(e)})),s.Qb(),s.Rb(4,"div",4),s.Rb(5,"button",5),s.cc("click",(function(){return t.getFiles()})),s.Gc(6,"getFiles"),s.Qb(),s.Rb(7,"button",5),s.cc("click",(function(){return t.echoFiles()})),s.Gc(8,"echofiles"),s.Qb(),s.Rb(9,"button",5),s.cc("click",(function(){return t.validarRepetido()})),s.Gc(10,"validarREpetido"),s.Qb(),s.Rb(11,"button",5),s.cc("click",(function(){return t.obtenerArchivos()})),s.Gc(12,"obtenerarchivos emitir"),s.Qb(),s.Qb(),s.Rb(13,"div",6),s.cc("click",(function(){return s.vc(e),s.uc(3).click()})),s.Rb(14,"div",7),s.cc("fileOver",(function(e){return t.fileOverBase(e)})),s.Rb(15,"div",1),s.Ec(16,Le,2,1,"div",8),s.Ec(17,De,2,1,"div",8),s.Qb(),s.Rb(18,"span",9),s.Rb(19,"strong"),s.Gc(20),s.Qb(),s.Qb(),s.Rb(21,"table",10),s.Mb(22,"thead"),s.Rb(23,"tbody"),s.Ec(24,He,11,7,"tr",11),s.Qb(),s.Qb(),s.Ec(25,We,5,4,"div",12),s.Qb(),s.Qb(),s.Rb(26,"div",13),s.Mb(27,"div"),s.Qb(),s.Qb(),s.Rb(28,"div",14),s.Rb(29,"div",15),s.Rb(30,"div",16),s.Rb(31,"div",17),s.Gc(32,"Response"),s.Qb(),s.Rb(33,"div",18),s.Gc(34),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}2&e&&(s.zb(2),s.lc("uploader",t.uploader)("multiple",t.multiple),s.zb(12),s.lc("ngClass",s.pc(10,Ye,t.hasBaseDropZoneOver))("uploader",t.uploader),s.zb(2),s.lc("ngIf",t.accept_files_extension.length),s.zb(1),s.lc("ngIf",t.max_size>0),s.zb(3),s.Hc(t.title),s.zb(4),s.lc("ngForOf",t.uploader.queue),s.zb(1),s.lc("ngIf",t.uploader.queue.length>0),s.zb(9),s.Ic(" ",t.response," "))},directives:[Oe.b,Oe.a,i.m,i.o,i.n,i.p],pipes:[i.f],styles:[".my-drop-zone[_ngcontent-%COMP%]{border:2px dotted #576369;width:100%;padding:20px}.another-file-over-class[_ngcontent-%COMP%], .nv-file-over[_ngcontent-%COMP%]{border:3px dotted red}.bg-gray[_ngcontent-%COMP%]{background:#fff;width:100%;padding:20px}.progress[_ngcontent-%COMP%]{height:10px;background:#f9f9f9;border:1px solid #dedede}.hasBaseDropZoneOver[_ngcontent-%COMP%]{border:3px dotted red}.btn-sm[_ngcontent-%COMP%]{font-size:8px}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}"]}),e})();function Xe(e,t){1&e&&s.Mb(0,"app-loading")}const et=function(){return["xlsx","csv"]};function tt(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",10),s.Rb(1,"div",25),s.Rb(2,"div",26),s.Rb(3,"p"),s.Gc(4,"se ha preserandofgd gdfgdfg dfgdfgdf"),s.Qb(),s.Qb(),s.Rb(5,"div",27),s.Rb(6,"div",13),s.Gc(7,"Carga un archivo de excel"),s.Qb(),s.Rb(8,"div",18),s.Rb(9,"file-upload",28),s.cc("ArchivosCargados",(function(t){return s.vc(e),s.ec(2).getArchivos(t)})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.ec(2);s.zb(9),s.lc("fk_key",e.formularioArchivo.get("id").value)("autoupload",!0)("title","Agregar Excel con personas a producto")("document_type","clientes")("accept_files_extension",s.oc(5,et))}}function ot(e,t){1&e&&(s.Rb(0,"div",10),s.Rb(1,"div",29),s.Rb(2,"div",30),s.Rb(3,"label",31),s.Gc(4,"Dependencia"),s.Qb(),s.Rb(5,"div",32),s.Rb(6,"div",33),s.Rb(7,"span",34),s.Mb(8,"i",35),s.Qb(),s.Qb(),s.Mb(9,"input",36),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",29),s.Rb(11,"div",30),s.Rb(12,"label",31),s.Gc(13,"C\xe9dula"),s.Qb(),s.Rb(14,"div",32),s.Rb(15,"div",33),s.Rb(16,"span",34),s.Mb(17,"i",35),s.Qb(),s.Qb(),s.Mb(18,"input",37),s.Qb(),s.Qb(),s.Qb(),s.Rb(19,"div",29),s.Rb(20,"div",30),s.Rb(21,"label",31),s.Gc(22,"Nombre"),s.Qb(),s.Rb(23,"div",32),s.Rb(24,"div",33),s.Rb(25,"span",34),s.Mb(26,"i",35),s.Qb(),s.Qb(),s.Mb(27,"input",38),s.Qb(),s.Qb(),s.Qb(),s.Rb(28,"div",29),s.Rb(29,"div",30),s.Rb(30,"label",31),s.Gc(31,"Estado"),s.Qb(),s.Rb(32,"div",32),s.Rb(33,"div",33),s.Rb(34,"span",34),s.Mb(35,"i",35),s.Qb(),s.Qb(),s.Mb(36,"input",39),s.Qb(),s.Qb(),s.Qb(),s.Rb(37,"div",29),s.Rb(38,"div",30),s.Rb(39,"label",31),s.Gc(40,"Modalidad"),s.Qb(),s.Rb(41,"div",32),s.Rb(42,"div",33),s.Rb(43,"span",34),s.Mb(44,"i",35),s.Qb(),s.Qb(),s.Rb(45,"select",40),s.Rb(46,"option",41),s.Gc(47,"Presencial"),s.Qb(),s.Rb(48,"option",42),s.Gc(49,"Virtual"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(50,"div",14),s.Rb(51,"div",10),s.Rb(52,"div",43),s.Rb(53,"button",44),s.Mb(54,"i",45),s.Gc(55," Buscar "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb())}const it=function(e){return{"bg-info text-white":e}};function at(e,t){if(1&e){const e=s.Sb();s.Rb(0,"tr",47),s.Rb(1,"td"),s.Rb(2,"div",48),s.Rb(3,"button",49),s.cc("click",(function(){s.vc(e);const t=s.ec().$implicit;return s.ec(2).gestionProgramacion(t)})),s.Mb(4,"i",50),s.Qb(),s.Qb(),s.Qb(),s.Rb(5,"td"),s.Gc(6),s.Qb(),s.Rb(7,"td"),s.Gc(8),s.Qb(),s.Rb(9,"td"),s.Gc(10),s.Qb(),s.Rb(11,"td"),s.Gc(12),s.Qb(),s.Qb()}if(2&e){const e=s.ec().$implicit,t=s.ec(2);s.lc("ngClass",s.pc(5,it,t.personaGestion&&e.cedula==t.personaGestion.cedula)),s.zb(6),s.Hc(e.fecha_programacion),s.zb(2),s.Hc(e.cedula),s.zb(2),s.Hc(e.nombre),s.zb(2),s.Hc(e.estado)}}function rt(e,t){if(1&e&&(s.Pb(0),s.Ec(1,at,13,7,"tr",46),s.Ob()),2&e){const e=t.$implicit;s.zb(1),s.lc("ngIf",""!==e.cedula)}}function nt(e,t){1&e&&(s.Rb(0,"small",87),s.Gc(1,"el campo modalidad no debe estar vac\xedo."),s.Qb())}function st(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,nt,2,0,"small",86),s.Qb()),2&e){const e=s.ec(4);s.zb(1),s.lc("ngIf",e.formulario.get("modalidad").hasError("required"))}}function ct(e,t){1&e&&(s.Rb(0,"small",87),s.Gc(1,"el campo descripcion no debe estar vac\xedo."),s.Qb())}function lt(e,t){if(1&e&&(s.Rb(0,"div"),s.Ec(1,ct,2,0,"small",86),s.Qb()),2&e){const e=s.ec(4);s.zb(1),s.lc("ngIf",e.formulario.get("descripcion").hasError("required"))}}function dt(e,t){if(1&e){const e=s.Sb();s.Rb(0,"tr"),s.Rb(1,"td"),s.Gc(2),s.Qb(),s.Rb(3,"td"),s.Gc(4),s.Qb(),s.Rb(5,"td"),s.Gc(6),s.Qb(),s.Rb(7,"td"),s.Rb(8,"button",88),s.cc("click",(function(){s.vc(e);const t=s.ec().$implicit;return s.ec(4).openModalNewCita(t)})),s.Mb(9,"i",89),s.Gc(10," Reservar "),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.ec().$implicit;s.zb(2),s.Hc(e.profesional),s.zb(2),s.Hc(e.dateformat_name),s.zb(2),s.Kc(" ",e.start," hasta ",e.end," libres ",e.minutes," minutos ")}}function bt(e,t){if(1&e&&(s.Pb(0),s.Ec(1,dt,11,5,"tr",0),s.Ob()),2&e){const e=t.$implicit,o=s.ec(4);s.zb(1),s.lc("ngIf",e.minutes>=o.odsDetalles.tipo_producto.tiempo)}}function ut(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",10),s.Rb(1,"div",55),s.Rb(2,"div",30),s.Rb(3,"label",31),s.Gc(4,"Cedula"),s.Qb(),s.Rb(5,"div",32),s.Rb(6,"div",33),s.Rb(7,"span",34),s.Mb(8,"i",35),s.Qb(),s.Qb(),s.Mb(9,"input",56),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",55),s.Rb(11,"div",30),s.Rb(12,"label",31),s.Gc(13,"Nombre"),s.Qb(),s.Rb(14,"div",32),s.Rb(15,"div",33),s.Rb(16,"span",34),s.Mb(17,"i",35),s.Qb(),s.Qb(),s.Mb(18,"input",57),s.Qb(),s.Qb(),s.Qb(),s.Rb(19,"div",55),s.Rb(20,"div",30),s.Rb(21,"label",31),s.Gc(22,"Dependencia"),s.Qb(),s.Rb(23,"div",32),s.Rb(24,"div",33),s.Rb(25,"span",34),s.Mb(26,"i",35),s.Qb(),s.Qb(),s.Mb(27,"input",58),s.Mb(28,"input",59),s.Qb(),s.Qb(),s.Qb(),s.Rb(29,"div",55),s.Rb(30,"div",30),s.Rb(31,"label",31),s.Gc(32,"Email"),s.Qb(),s.Rb(33,"div",32),s.Rb(34,"div",33),s.Rb(35,"span",34),s.Mb(36,"i",35),s.Qb(),s.Qb(),s.Mb(37,"input",60),s.Qb(),s.Qb(),s.Qb(),s.Rb(38,"div",55),s.Rb(39,"div",30),s.Rb(40,"label",31),s.Gc(41,"Tel\xe9fono"),s.Qb(),s.Rb(42,"div",32),s.Rb(43,"div",33),s.Rb(44,"span",34),s.Mb(45,"i",35),s.Qb(),s.Qb(),s.Mb(46,"input",61),s.Qb(),s.Qb(),s.Qb(),s.Rb(47,"div",55),s.Rb(48,"div",30),s.Rb(49,"label",31),s.Gc(50,"Divisi\xf3n"),s.Qb(),s.Rb(51,"div",32),s.Rb(52,"div",33),s.Rb(53,"span",34),s.Mb(54,"i",35),s.Qb(),s.Qb(),s.Mb(55,"input",62),s.Qb(),s.Qb(),s.Qb(),s.Rb(56,"div",55),s.Rb(57,"div",30),s.Rb(58,"label",31),s.Gc(59,"Subdivisi\xf3n"),s.Qb(),s.Rb(60,"div",32),s.Rb(61,"div",33),s.Rb(62,"span",34),s.Mb(63,"i",35),s.Qb(),s.Qb(),s.Mb(64,"input",63),s.Qb(),s.Qb(),s.Qb(),s.Rb(65,"div",55),s.Rb(66,"div",30),s.Rb(67,"label",31),s.Gc(68,"Cargo"),s.Qb(),s.Rb(69,"div",32),s.Rb(70,"div",33),s.Rb(71,"span",34),s.Mb(72,"i",35),s.Qb(),s.Qb(),s.Mb(73,"input",64),s.Qb(),s.Qb(),s.Qb(),s.Rb(74,"div",55),s.Rb(75,"div",30),s.Rb(76,"label",31),s.Gc(77,"Direcci\xf3n"),s.Qb(),s.Rb(78,"div",32),s.Rb(79,"div",33),s.Rb(80,"span",34),s.Mb(81,"i",35),s.Qb(),s.Qb(),s.Mb(82,"input",65),s.Qb(),s.Qb(),s.Qb(),s.Rb(83,"div",55),s.Rb(84,"div",30),s.Rb(85,"label",31),s.Gc(86,"Ciudad"),s.Qb(),s.Rb(87,"div",32),s.Rb(88,"div",33),s.Rb(89,"span",34),s.Mb(90,"i",35),s.Qb(),s.Qb(),s.Mb(91,"input",66),s.Mb(92,"input",67),s.Qb(),s.Qb(),s.Qb(),s.Rb(93,"div",55),s.Rb(94,"div",30),s.Rb(95,"label",31),s.Gc(96,"Barrio"),s.Qb(),s.Rb(97,"div",32),s.Rb(98,"div",33),s.Rb(99,"span",34),s.Mb(100,"i",35),s.Qb(),s.Qb(),s.Mb(101,"input",68),s.Qb(),s.Qb(),s.Qb(),s.Rb(102,"div",55),s.Rb(103,"div",30),s.Rb(104,"label",31),s.Gc(105,"Otro si"),s.Qb(),s.Rb(106,"div",32),s.Rb(107,"div",33),s.Rb(108,"span",34),s.Mb(109,"i",35),s.Qb(),s.Qb(),s.Mb(110,"input",69),s.Qb(),s.Qb(),s.Qb(),s.Rb(111,"div",70),s.Gc(112," Datos para diligenciar "),s.Qb(),s.Rb(113,"div",55),s.Rb(114,"div",30),s.Rb(115,"label",31),s.Gc(116,"Modalidad"),s.Qb(),s.Rb(117,"div",32),s.Rb(118,"div",33),s.Rb(119,"span",34),s.Mb(120,"i",35),s.Qb(),s.Qb(),s.Rb(121,"select",71),s.Rb(122,"option",41),s.Gc(123,"Presencial"),s.Qb(),s.Rb(124,"option",42),s.Gc(125,"Virtual"),s.Qb(),s.Qb(),s.Qb(),s.Ec(126,st,2,1,"div",0),s.Qb(),s.Qb(),s.Rb(127,"div",55),s.Rb(128,"div",30),s.Rb(129,"label",31),s.Gc(130,"Descripci\xf3n"),s.Qb(),s.Rb(131,"div",32),s.Rb(132,"div",33),s.Rb(133,"span",34),s.Mb(134,"i",35),s.Qb(),s.Qb(),s.Mb(135,"input",72),s.Qb(),s.Ec(136,lt,2,1,"div",0),s.Qb(),s.Qb(),s.Rb(137,"div",55),s.Rb(138,"div",30),s.Rb(139,"label",31),s.Gc(140,"Numero de Citas"),s.Qb(),s.Rb(141,"div",32),s.Rb(142,"div",33),s.Rb(143,"span",34),s.Mb(144,"i",35),s.Qb(),s.Qb(),s.Mb(145,"input",73),s.Qb(),s.Qb(),s.Qb(),s.Rb(146,"div",55),s.Rb(147,"div",30),s.Rb(148,"label",31),s.Gc(149,"Fecha Seguimiento"),s.Qb(),s.Rb(150,"div",32),s.Rb(151,"div",33),s.Rb(152,"span",34),s.Mb(153,"i",35),s.Qb(),s.Qb(),s.Rb(154,"input",74,75),s.cc("dateSelect",(function(t){return s.vc(e),s.ec(3).dateSeleccionado(t)})),s.Qb(),s.Rb(156,"div",76),s.Rb(157,"i",77),s.cc("click",(function(){return s.vc(e),s.uc(155).toggle()})),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(158,"div",55),s.Rb(159,"div",30),s.Rb(160,"label",31),s.Gc(161,"Estado Programaci\xf3n"),s.Qb(),s.Rb(162,"div",32),s.Rb(163,"div",33),s.Rb(164,"span",34),s.Mb(165,"i",35),s.Qb(),s.Qb(),s.Mb(166,"input",78),s.Qb(),s.Qb(),s.Qb(),s.Rb(167,"div",55),s.Rb(168,"div",30),s.Rb(169,"label",31),s.Gc(170,"Comentarios"),s.Qb(),s.Rb(171,"div",32),s.Rb(172,"div",33),s.Rb(173,"span",34),s.Mb(174,"i",35),s.Qb(),s.Qb(),s.Mb(175,"textarea",79),s.Qb(),s.Qb(),s.Qb(),s.Rb(176,"div",55),s.Rb(177,"div",30),s.Rb(178,"label",31),s.Gc(179,"Cargado Modulo Pyp y Ergonomia (si/no)"),s.Qb(),s.Rb(180,"div",32),s.Rb(181,"div",33),s.Rb(182,"span",34),s.Mb(183,"i",35),s.Qb(),s.Qb(),s.Rb(184,"select",80),s.Rb(185,"option",41),s.Gc(186,"Si"),s.Qb(),s.Rb(187,"option",42),s.Gc(188,"No"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(189,"table",81),s.Rb(190,"thead",82),s.Rb(191,"tr"),s.Rb(192,"th"),s.Gc(193,"Profesional"),s.Qb(),s.Rb(194,"th"),s.Gc(195,"Fecha cita Disponible (Y-m-d)"),s.Qb(),s.Rb(196,"th"),s.Gc(197,"Hora Cita"),s.Qb(),s.Mb(198,"th"),s.Qb(),s.Rb(199,"tr"),s.Rb(200,"th"),s.Mb(201,"input",83),s.Qb(),s.Rb(202,"th"),s.Mb(203,"input",84),s.Qb(),s.Rb(204,"th"),s.Mb(205,"input",85),s.Qb(),s.Mb(206,"th"),s.Qb(),s.Qb(),s.Rb(207,"tbody"),s.Ec(208,bt,2,1,"ng-container",23),s.Qb(),s.Qb()}if(2&e){const e=s.ec(3);s.zb(126),s.lc("ngIf",e.formulario.get("modalidad").errors&&e.formulario.get("modalidad").touched),s.zb(10),s.lc("ngIf",e.formulario.get("descripcion").errors&&e.formulario.get("descripcion").touched),s.zb(72),s.lc("ngForOf",e.agendasDisponibles)}}function pt(e,t){1&e&&(s.Rb(0,"div",10),s.Rb(1,"ngb-accordion",51,52),s.Rb(3,"ngb-panel",53),s.Ec(4,ut,209,3,"ng-template",54),s.Qb(),s.Qb(),s.Qb())}function mt(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",2),s.Rb(1,"nav",3),s.Rb(2,"div",4),s.Rb(3,"div",5),s.Rb(4,"button",6),s.cc("click",(function(){return s.vc(e),s.ec().filtrar()})),s.Mb(5,"i",7),s.Gc(6," Filtrar "),s.Qb(),s.Rb(7,"button",8),s.cc("click",(function(){return s.vc(e),s.ec().openCargaExcel()})),s.Mb(8,"i",9),s.Gc(9," Cargar Excel "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",10),s.Rb(11,"div",11),s.Rb(12,"div",12),s.Rb(13,"div",13),s.Rb(14,"div",10),s.Rb(15,"div",14),s.Gc(16),s.Qb(),s.Rb(17,"div",14),s.Gc(18),s.Qb(),s.Rb(19,"div",14),s.Gc(20),s.Qb(),s.Rb(21,"div",14),s.Rb(22,"span",15),s.Gc(23),s.Qb(),s.Rb(24,"span",16),s.Gc(25),s.Qb(),s.Gc(26," duracion min "),s.Rb(27,"span",17),s.Gc(28),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(29,"div",18),s.Rb(30,"p",19),s.Gc(31),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(32,"div",20),s.Ec(33,tt,10,6,"div",21),s.Ec(34,ot,56,0,"div",21),s.Qb(),s.Qb(),s.Rb(35,"div",10),s.Rb(36,"table",22),s.Rb(37,"thead"),s.Rb(38,"tr"),s.Mb(39,"th"),s.Rb(40,"th"),s.Gc(41,"Fecha Prog (d/m/Y)"),s.Qb(),s.Rb(42,"th"),s.Gc(43,"C\xe9dula"),s.Qb(),s.Rb(44,"th"),s.Gc(45,"Nombre"),s.Qb(),s.Rb(46,"th"),s.Gc(47,"Estado"),s.Qb(),s.Qb(),s.Qb(),s.Rb(48,"tbody"),s.Ec(49,rt,2,1,"ng-container",23),s.Qb(),s.Qb(),s.Qb(),s.Rb(50,"form",24),s.cc("ngSubmit",(function(t){return s.vc(e),s.ec().guardar(t)})),s.Ec(51,pt,5,0,"div",21),s.Qb(),s.Qb()}if(2&e){const e=s.ec();s.zb(16),s.Ic(" Contrato: ",e.odsDetalles.contrato.nombre," "),s.zb(2),s.Ic(" producto: ",e.odsDetalles.tipo_producto.name," "),s.zb(2),s.Ic(" regional: ",e.odsDetalles.regional.nombre," "),s.zb(3),s.Ic(" ",e.odsDetalles.anio,""),s.zb(2),s.Ic(" ",e.odsDetalles.cantidad,""),s.zb(3),s.Ic(" ",e.odsDetalles.tipo_producto.tiempo,""),s.zb(3),s.Ic(" ",e.odsDetalles.descripcion," "),s.zb(2),s.lc("ngIf",e.mostrarCargaExcel),s.zb(1),s.lc("ngIf",e.mostrarFiltros),s.zb(15),s.lc("ngForOf",e.productosLista),s.zb(1),s.lc("formGroup",e.formulario),s.zb(1),s.lc("ngIf",e.mostrarRegistro)}}const ft=[{path:"",canActivate:[n.a],data:{breadcrumb:{label:"pea",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"pea"}}},children:[{path:"",component:c,canActivate:[n.a],data:{breadcrumb:{label:"pea",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"pea"}}}},{path:"progods",component:y,canActivate:[n.a],data:{breadcrumb:{label:"Crear Ods",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"Crear ODS"}}}},{path:"solicitud",component:Z,canActivate:[n.a],data:{breadcrumb:{label:"Solicitud",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"Crear ODS"}}}},{path:"solicitudes",component:ae,canActivate:[n.a],data:{breadcrumb:{label:"Solicitud Lista",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"Crear ODS"}}}},{path:"generar",component:Ie,canActivate:[n.a],data:{breadcrumb:{label:"Generar Agenda",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"Crear ODS"}}}},{path:"programar",component:ee,canActivate:[n.a],data:{breadcrumb:{label:"Programar Agenda",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"Crear ODS"}}}},{path:"solicitudproductos",component:(()=>{class e{constructor(e,t,o,i,a,r,n,s){this._ToastService=e,this.FormBuilder=t,this._ProductosrepsoService=o,this._ProductoService=i,this._ClienteService=a,this._AgendaService=r,this.modalService=n,this.route=s,this.loading=!0,this.mostrarRegistro=!1,this.mostrarCargaExcel=!1,this.mostrarFiltros=!0,this.archivoscargados=[],this.active=1}ngOnInit(){this.buildForm(),this.route.queryParams.subscribe(e=>{this.id=e.id,this.initLoadData(),this.urlSubidaArchivo=l.a.apiUrl+l.a.imports.importExcelToProductRepso+this.id})}buildForm(){this.formulario=this.FormBuilder.group({cedula:["",[v.t.required]],nombre:["",[v.t.required]],dependencia:[null],dependencia_id:[null],email:[null],telefono:[null],division:[null],subdivision:[null],cargo:[null],direccion:[null],ciudad:[null],ciudad_id:[null],barrio:[null],otrosi:[null],fecha_ingreso:[null],modalidad:["",[v.t.required]],descripcion:["",[v.t.required]],numero_citas:[null],fecha_seguimiento:[null],estado_programacion:[null],comentarios:[null],pyp_ergonomia:[""],profesionalsearch:[""],fechadisponiblesearch:[""]}),this.formularioArchivo=this.FormBuilder.group({id:[this.id],archivo:["",[v.t.required]]})}initLoadData(){this.loading=!0,Object(G.a)([this._ProductosrepsoService.getSolicitudById(this.id),this._ProductoService.getProductosBySolicitud(this.id,{})]).subscribe(([e,t])=>{this.odsDetalles=e,this.productosLista=t.data,console.log("holmanuelf",this.productosLista),this.loading=!1})}agregarRegistro(){this.mostrarRegistro=!this.mostrarRegistro}gestionProgramacion(e){this.mostrarRegistro=!this.mostrarRegistro,void 0===this.personaGestion&&(this.personaGestion=e),this.personaGestion.cedula!=e.cedula&&(this.personaGestion=e,this.mostrarRegistro=!0),console.log("registropersona ",this.personaGestion),console.log("valor de mostrar registro ",this.mostrarRegistro),console.log("item estado_id ",e.estado_id),9==e.estado_id&&this.mostrarRegistro?this.agendaDisponibleProfesionales():(console.log("entra en agendasdisponibles null"),this.agendasDisponibles=null),console.log("agendas dipooonibles ",this.agendasDisponibles),this.setvaluesFormulario()}setvaluesFormulario(){this.formulario.patchValue({nombre:this.personaGestion.nombre,cedula:this.personaGestion.cedula,dependencia:this.personaGestion.dependencia,email:this.personaGestion.email,telefono:this.personaGestion.telefono,division:this.personaGestion.division,subdivision:this.personaGestion.subdivision,cargo:this.personaGestion.cargo,direccion:this.personaGestion.direccion,ciudad:this.personaGestion.ciudad,barrio:this.personaGestion.barrio,otrosi:this.personaGestion.otrosi,modalidad:this.personaGestion.modalidad,descripcion:this.personaGestion.descripcion,numero_citas:this.personaGestion.numero_citas,fecha_seguimiento:this.personaGestion.fecha_seguimiento,estado_id:this.personaGestion.estado_id,estado_programacion:this.personaGestion.estado,comentarios:this.personaGestion.comentarios,pyp_ergonomia:this.personaGestion.pyp_ergonomia})}openCargaExcel(){this.mostrarCargaExcel=!this.mostrarCargaExcel,1!=this.mostrarCargaExcel||(this.mostrarFiltros=!1)}filtrar(){this.mostrarFiltros=!this.mostrarFiltros,1!=this.mostrarFiltros||(this.mostrarCargaExcel=!1)}importExcel(){}getArchivos(e){this.archivoscargados=e,console.log("algo paso",this.archivoscargados),this.formularioArchivo.get("archivo").setValue(this.archivoscargados[0].path),this.archivoscargados.length>0&&(this._ToastService.info("archivo cargado y procesando datos..."),this.procesarDatosExcel())}procesarDatosExcel(){console.log("el valor del archivo ",this.formularioArchivo.get("archivo").value),this._ProductoService.procesarExcelBySolicitud(this.id,Object.assign({nombrearchivo:this.formularioArchivo.value.archivo},this.odsDetalles)).subscribe(e=>{"error"==e.status&&this._ToastService.danger(e.msg),200==e.code&&(this._ToastService.success(e.msg),this.mostrarCargaExcel=!1,this._ProductoService.getProductosBySolicitud(this.id,{}).subscribe(e=>{this.productosLista=e.data}))})}buscarCedula(e){"Enter"===e.key&&this.formulario.get("cedula").value>0&&this._ClienteService.getClienteByCedula(this.formulario.get("cedula").value).subscribe(e=>{this.formulario.patchValue({nombre:e.nombre,correo:e.email,division:e.division})})}agendaDisponibleProfesionales(){this.loading=!0,this._AgendaService.postAgendaProfesionalAllProfesional(Object.assign({},{tipo_producto:this.odsDetalles.tipo_producto.id})).subscribe(e=>{"error"==e.status&&this._ToastService.danger(e.msg),200==e.code&&(this.agendasDisponibles=e.data,e.data.length>0?this._ToastService.success(e.msg):this._ToastService.info("no existen agendas disponibles")),this.loading=!1})}dateSeleccionado(e){}guardar(e){}actualizarProducto(e){let t;console.log("en function actualziarProducto ",e),t=this.productosLista.findIndex(t=>e.id===t.id),console.log("el index encontrado index  =",t),t>=0&&(this.productosLista[t]=e,console.log("dentro de if index ",this.productosLista[t]))}openModalNewCita(e){if(console.log("el formulario ",this.formulario),console.log("el dato de la citaa ",e),console.log("lapersonagetsion aid ",this.personaGestion),9==this.personaGestion.estado_id)if(this.formulario.valid){const t=this.modalService.open(we,{backdrop:"static",size:"xs",keyboard:!1});null==this.formulario.get("fecha_seguimiento").value?this.formulario.get("fecha_seguimiento").setValue(null):this.formulario.get("fecha_seguimiento"),t.componentInstance.data={cita:e,odsDetalles:this.odsDetalles,persona:this.personaGestion,info:Object.assign({},this.formulario.value)},t.result.then(e=>{"ok"==e.status&&(this.actualizarProducto(e.data.data.producto),this.formulario.reset(),this.mostrarRegistro=!1)}).catch(e=>{})}else this.formulario.markAllAsTouched(),this._ToastService.info("debe ingresar los datos del formulariio, secci\xf3n gestionar programaci\xf3n");else this._ToastService.info("esta persona ya ha sido programada")}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(M.a),s.Lb(v.c),s.Lb(z),s.Lb(Pe),s.Lb(Fe),s.Lb(se),s.Lb(R.k),s.Lb(r.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-productorepsodetallesprod"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"navbar","navbar-expand-md","navbar-light","bg-light","mb-1"],["id","navbarNav",1,"collapse","navbar-collapse"],["role","group","aria-label","Basic example",1,"btn-group","pull-right","ml-auto"],["type","button",1,"btn","btn-outline-info","btn-sm",3,"click"],[1,"fa","fa-filter"],[1,"btn","btn-outline-success","btn-sm","pull-right",3,"click"],[1,"fa","fa-file-excel-o"],[1,"row"],[1,"col-md-4"],[1,"card","bg-light","mb-3"],[1,"card-header"],[1,"col-md-12"],[1,"badge","badge-secondary","p-1"],[1,"badge","badge-success","p-1","ml-1"],[1,"badge","badge-info","p-1","ml-1"],[1,"card-body"],[1,"card-text"],[1,"col-md-8"],["class","row",4,"ngIf"],[1,"table","table-sm","table-hover","table-bordered","table-striped"],[4,"ngFor","ngForOf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-md-10","offset-md-1"],[1,"alert","alert-danger"],[1,"card","bg-light","mb-1","w-100"],[3,"fk_key","autoupload","title","document_type","accept_files_extension","ArchivosCargados"],[1,"col-md-6","col-lg-4","col-xs-12"],[1,"form-group"],["for","regional"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-map"],["type","number","name","fdependencia_id","id","fdependencia_id",1,"form-control","form-control-sm"],["type","number","name","fcedula","id","fcedula",1,"form-control","form-control-sm"],["type","number","name","fnombre","id","fnombre",1,"form-control","form-control-sm"],["type","number","name","festado","id","festado",1,"form-control","form-control-sm"],["type","number","name","fmodalidad","id","fmodalidad",1,"form-control","form-control-sm"],["value","1"],["value","2"],[1,"col-md-12","mb-3"],["type","button",1,"btn","btn-outline-secondary","btn-sm","pull-right"],[1,"fa","fa-search"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-tasks"],["closeOthers","true","activeIds","toggle-2",1,"w-100"],["acc","ngbAccordion"],["id","toggle-2","title","Gestionar Programaci\xf3n"],["ngbPanelContent",""],[1,"col-md-4","col-lg-4","col-xs-12"],["type","text","name","cedula","id","decula","formControlName","cedula","readonly","",1,"form-control","form-control-sm"],["type","text","name","nombre","id","nombre","formControlName","nombre","readonly","",1,"form-control","form-control-sm"],["type","hidden","name","dependencia_id","id","dependencia_id","formControlName","dependencia_id","readonly","",1,"form-control","form-control-sm"],["type","text","name","dependencia","id","dependencia","formControlName","dependencia","readonly","",1,"form-control","form-control-sm"],["type","text","name","email","id","email","formControlName","email","readonly","",1,"form-control","form-control-sm"],["type","text","name","telefono","id","telefono","formControlName","telefono","readonly","",1,"form-control","form-control-sm"],["type","text","name","division","id","division","formControlName","division","readonly","",1,"form-control","form-control-sm"],["type","text","name","subdivision","id","subdivision","formControlName","subdivision","readonly","",1,"form-control","form-control-sm"],["type","text","name","cargo","id","cargo","formControlName","cargo","readonly","",1,"form-control","form-control-sm"],["type","text","name","direccion","id","direccion","formControlName","direccion","readonly","",1,"form-control","form-control-sm"],["type","text","name","ciudad","id","ciudad","formControlName","ciudad","readonly","",1,"form-control","form-control-sm"],["type","text","name","ciudad_id","id","ciudad_id","formControlName","ciudad_id","readonly","",1,"form-control","form-control-sm"],["type","text","name","barrio","id","barrio","formControlName","barrio","readonly","",1,"form-control","form-control-sm"],["type","text","name","otrosi","id","otrosi","formControlName","otrosi","readonly","",1,"form-control","form-control-sm"],[1,"alert","alert-dark","w-100","text-dark","font-weight-bold","text-center"],["name","modalidad","id","modalidad","formControlName","modalidad",1,"form","form-control-sm"],["type","text","name","descripcion","id","descripcion","formControlName","descripcion",1,"form-control","form-control-sm"],["type","number","name","numero_citas","id","numero_citas","readonly","",1,"form-control","form-control-sm"],["type","tet","ngbDatepicker","","name","fecha_seguimiento","id","fecha_seguimiento","formControlName","fecha_seguimiento","readonly","",1,"form-control","form-control-sm",3,"dateSelect"],["d","ngbDatepicker"],[1,"input-group-append"],[1,"fa","fa-calendar",3,"click"],["type","text","name","estado_programacion","id","estado_programacion","formControlName","estado_programacion","readonly","",1,"form-control","form-control-sm"],["type","text","name","comentarios","id","comentarios","formControlName","comentarios",1,"form-control","form-control-sm"],["name","pyp_ergonomia","id","pyp_ergonomia","formControlName","pyp_ergonomia",1,"form","form-control-sm"],[1,"table","table-sm","table-bordered"],[1,"thead-light"],["type","text","formControlName","profesionalsearch","id","profesionalsearch","name","profesionalsearch",1,"form-control","form-control-sm"],["type","text","formControlName","fechadisponiblesearch","id","fechadisponiblesearch","name","fechadisponiblesearch",1,"form-control","form-control-sm"],["type","text",1,"form-control","form-control-sm"],["class","form-text text-danger",4,"ngIf"],[1,"form-text","text-danger"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa","fa-calendar"]],template:function(e,t){1&e&&(s.Ec(0,Xe,1,0,"app-loading",0),s.Ec(1,mt,52,12,"div",1)),2&e&&(s.lc("ngIf",t.loading),s.zb(1),s.lc("ngIf",!t.loading))},directives:[i.o,C.a,R.m,i.n,v.v,v.m,v.f,Ke,v.p,v.u,i.m,R.a,R.o,R.p,v.a,v.l,v.e,v.s,R.j],styles:[""]}),e})(),canActivate:[n.a],data:{breadcrumb:{label:"Solicitud-productos",info:{icon:"fa fa-caret-square-o-up",iconType:"bootstrap",label:"solicitud-Productos"}}}}]}];let ht=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[r.f.forChild(ft)],r.f]}),e})();var gt=o("VixK"),vt=o("pcdV"),Rt=o("EMvb"),Qt=o("keMx"),_t=o("PCNd");let yt=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[x,J,I,Pe,z,Fe,se,{provide:a.a,useClass:gt.a,multi:!0},{provide:a.a,useClass:Rt.a,multi:!0},{provide:a.a,useClass:vt.a,multi:!0},Qt.a],imports:[[i.b,ht,_t.a,R.l,v.g,v.r,ve.b]]}),e})()}}]);